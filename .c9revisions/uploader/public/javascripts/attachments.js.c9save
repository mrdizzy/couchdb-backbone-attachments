{"ts":1360094671784,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"   var Attachment = Backbone.Model.extend({\r\n       path: function(type) {\r\n           return this.collection.url + \"/\" + type + \"-\" + this.get(\"id\")\r\n       }\r\n   });\r\n\r\n   Backbone.View.Attachment = Backbone.View.extend({\r\n       initialize: function() {\r\n           var that = this;\r\n           this.$el.html(\"<div id=\\\"sortable\\\"></div>\")\r\n           var sortableEl = this.$('#sortable');\r\n           sortableEl.sortable({\r\n               update: function(a, b) {\r\n                   that.collection.belongs_to.set(\"attachments_order\", sortableEl.sortable(\"toArray\"));\r\n               }\r\n           });\r\n       }\r\n   });\r\n\r\n   var Attachments = Backbone.Collection.extend({\r\n       model: Attachment\r\n   });\r\n   Backbone.Model.CouchDB = Backbone.Model.extend({\r\n       initialize: function() {\r\n           this.attachments = new Attachments();\r\n           this.attachments.url = this.url() + \"/attachments\"\r\n           var model = this;\r\n           var attachments = _.map(this.get(\"attachments_order\"), function(unique) {\r\n               var attachment = {\r\n                   id: unique,\r\n                   _rev: model.get(\"_rev\"),\r\n               }\r\n               return attachment;\r\n           }, this)\r\n\r\n           this.attachments.reset(attachments);\r\n           this.attachments.belongs_to = this;\r\n           this.on('change', this.sortAttachments);\r\n       },\r\n       sortAttachments: function() {\r\n           console.log(this.get(\"attachments_order\"));\r\n           var attachments = _.map(this.get(\"attachments_order\"), function(unique) {\r\n               var attachment = this.attachments.get(unique);\r\n               attachment.set(\"_rev\", this.get(\"_rev\"));\r\n               return attachment;\r\n           }, this);\r\n           this.attachments.reset(attachments);\r\n       },\r\n       idAttribute: \"_id\"\r\n   });"]],"start1":0,"start2":0,"length1":0,"length2":1828}]],"length":1828}
{"contributors":[],"silentsave":false,"ts":1360236472185,"patch":[[{"diffs":[[0,"\r\n\r\n"],[-1,"   Backbone.View.Attachment = Backbone.View.extend({\r\n       initialize: function() {\r\n           var that = this;\r\n           this.$el.html(\"<div id=\\\"sortable\\\"></div>\")\r\n           var sortableEl = this.$('#sortable');\r\n           sortableEl.sortable({\r\n               update: function(a, b) {\r\n                   that.collection.belongs_to.set(\"attachments_order\", sortableEl.sortable(\"toArray\"));\r\n               }\r\n           });\r\n       }\r\n   });\r\n\r\n"],[0,"   v"]],"start1":167,"start2":167,"length1":465,"length2":8},{"diffs":[[0,"   });\r\n"],[1,"   \r\n"],[0,"   Backb"]],"start1":248,"start2":248,"length1":16,"length2":21},{"diffs":[[0,"e: \"_id\"\r\n   });"],[1,"\r\n   \r\n   Backbone.View.Attachment = Backbone.View.extend({\r\n       initialize: function() {\r\n           var that = this;\r\n           this.$el.html(\"<div id=\\\"sortable\\\"></div>\")\r\n           var sortableEl = this.$('#sortable');\r\n           sortableEl.sortable({\r\n               update: function(a, b) {\r\n                   that.collection.belongs_to.set(\"attachments_order\", sortableEl.sortable(\"toArray\"));\r\n               }\r\n           });\r\n       }\r\n   });\r\n"]],"start1":1360,"start2":1360,"length1":16,"length2":478}]],"length":1838,"saved":false}
{"ts":1360236592678,"patch":[[{"diffs":[[1,"/*"],[0,"   var Attachment = Back"]],"start1":0,"start2":0,"length1":24,"length2":26},{"diffs":[[0,"     });\r\n       }\r\n   });\r\n"],[1,"*/"]],"start1":1812,"start2":1812,"length1":28,"length2":30}]],"length":1842,"saved":false}
{"ts":1360237407150,"patch":[[{"diffs":[[1,"var Attachment = Backbone.Model.extend({})\r\n\r\n\r\n\r\n"],[0,"/*   var"]],"start1":0,"start2":0,"length1":8,"length2":58}]],"length":1892,"saved":false}
{"ts":1360238081956,"patch":[[{"diffs":[[0,"extend({"],[1,"url: '/hello'"],[0,"})\r\n\r\n\r\n"]],"start1":32,"start2":32,"length1":16,"length2":29}]],"length":1905,"saved":false}
{"ts":1360242483886,"patch":[[{"diffs":[[0,"var "],[1,"CouchDB"],[0,"Attachment = Backbone.Mo"]],"start1":0,"start2":0,"length1":28,"length2":35},{"diffs":[[0,"end("],[-1,"{url: '/hello'})\r\n\r\n"],[1,")\r\n\r\nvar Backbone.Model.CouchDB = Backbone.Model.extend({\r\n    \r\n    \r\n});"],[0,"\r\n\r\n"]],"start1":42,"start2":42,"length1":28,"length2":82}]],"length":1966,"saved":false}
{"ts":1360242503716,"patch":[[{"diffs":[[0,"var "],[1,"Backbone.Model."],[0,"CouchDB"],[1,"."],[0,"Attachme"]],"start1":0,"start2":0,"length1":19,"length2":35}]],"length":1982,"saved":false}
{"ts":1360242513518,"patch":[[{"diffs":[[0,"var "],[-1,"Backbone.Model.CouchDB."],[0,"Atta"]],"start1":0,"start2":0,"length1":31,"length2":8}]],"length":1959,"saved":false}
{"ts":1360242709908,"patch":[[{"diffs":[[0,"  \r\n    "],[1,"initialize: function() {\r\n        \r\n    },\r\n    parse: function(resp, options) {\r\n        \r\n    }"],[0,"\r\n});\r\n\r"]],"start1":100,"start2":100,"length1":16,"length2":113}]],"length":2056,"saved":false}
{"ts":1360242730176,"patch":[[{"diffs":[[0," {\r\n        "],[1,"console.log(resp);"],[0,"\r\n    }\r\n});"]],"start1":186,"start2":186,"length1":24,"length2":42}]],"length":2074,"saved":false}
{"ts":1360242759452,"patch":[[{"diffs":[[0,"tend({\r\n    "],[1,"url: '/home',"],[0,"\r\n    initia"]],"start1":90,"start2":90,"length1":24,"length2":37}]],"length":2087,"saved":false}
{"ts":1360242770065,"patch":[[{"diffs":[[-1,"var Attachment = Backbone.Model.extend()\r\n"],[0,"\r\nva"]],"start1":0,"start2":0,"length1":46,"length2":4}]],"length":2045,"saved":false}
{"ts":1360242789534,"patch":[[{"diffs":[[0,"\r\n"],[-1,"var "],[0,"Backbone"]],"start1":0,"start2":0,"length1":14,"length2":10}]],"length":2041,"saved":false}
{"ts":1360242841865,"patch":[[{"diffs":[[-1,"\r\n"],[1,"    var Attachment = Backbone.Model.extend({\n        path: function(type) {\n            return this.collection.url + \"/\" + type + \"-\" + this.get(\"id\")\n        }\n    });\n\n    var Attachments = Backbone.Collection.extend({\n        model: Attachment\n    });\n    "],[0,"Backbone"]],"start1":0,"start2":0,"length1":10,"length2":267},{"diffs":[[0,"extend({"],[-1,"\r"],[0,"\n"],[1,"   "],[0,"    "],[1," "],[0,"url: '/h"]],"start1":299,"start2":299,"length1":22,"length2":25},{"diffs":[[0,"'/home',"],[-1,"\r"],[0,"\n"],[1,"    "],[0,"    init"]],"start1":321,"start2":321,"length1":18,"length2":21},{"diffs":[[0,"ze: function() {"],[-1,"\r"],[1,"\n"],[0,"\n        \r\n    }"]],"start1":346,"start2":346,"length1":33,"length2":33},{"diffs":[[0,"    "],[-1,"\r"],[1,"},"],[0,"\n    "],[-1,"},\r\n"],[0,"    "]],"start1":368,"start2":368,"length1":18,"length2":15},{"diffs":[[0,"tions) {"],[-1,"\r"],[0,"\n       "]],"start1":407,"start2":407,"length1":17,"length2":16},{"diffs":[[0,"    "],[-1,"console.log(resp);\r\n    }\r\n});\r\n\r\n"],[1,"    var attachments = resp._attachments;\n\n            console.log(resp);\n        }\n    });\n\n    "],[0,"/*  "]],"start1":420,"start2":420,"length1":42,"length2":104},{"diffs":[[0,"e.Model.extend({"],[-1,"\r"],[0,"\n       path: fu"]],"start1":549,"start2":549,"length1":33,"length2":32},{"diffs":[[0,"tion(type) {"],[-1,"\r"],[0,"\n           "]],"start1":583,"start2":583,"length1":25,"length2":24},{"diffs":[[0,"et(\"id\")"],[-1,"\r"],[0,"\n       "]],"start1":661,"start2":661,"length1":17,"length2":16},{"diffs":[[0,"   }"],[-1,"\r"],[0,"\n   });"],[-1,"\r\n\r"],[1,"\n"],[0,"\n   "]],"start1":674,"start2":674,"length1":19,"length2":16},{"diffs":[[0,"lection.extend({"],[-1,"\r"],[0,"\n       model: A"]],"start1":720,"start2":720,"length1":33,"length2":32},{"diffs":[[0,"tachment"],[-1,"\r"],[0,"\n   });"],[-1,"\r"],[0,"\n   "],[-1,"\r"],[0,"\n   Back"]],"start1":753,"start2":753,"length1":30,"length2":27},{"diffs":[[0,"e.Model.extend({"],[-1,"\r"],[0,"\n       initiali"]],"start1":808,"start2":808,"length1":33,"length2":32},{"diffs":[[0,"ze: function() {"],[-1,"\r"],[0,"\n           this"]],"start1":840,"start2":840,"length1":33,"length2":32},{"diffs":[[0,"ments();"],[-1,"\r"],[0,"\n       "]],"start1":897,"start2":897,"length1":17,"length2":16},{"diffs":[[0,"chments\""],[-1,"\r"],[0,"\n       "]],"start1":959,"start2":959,"length1":17,"length2":16},{"diffs":[[0,"ar model = this;"],[-1,"\r"],[0,"\n           var "]],"start1":980,"start2":980,"length1":33,"length2":32},{"diffs":[[0,"nction(unique) {"],[-1,"\r"],[0,"\n               "]],"start1":1065,"start2":1065,"length1":33,"length2":32},{"diffs":[[0,"ment = {"],[-1,"\r"],[0,"\n       "]],"start1":1107,"start2":1107,"length1":17,"length2":16},{"diffs":[[0," unique,"],[-1,"\r"],[0,"\n       "]],"start1":1138,"start2":1138,"length1":17,"length2":16},{"diffs":[[0,"\"_rev\"),"],[-1,"\r"],[0,"\n       "]],"start1":1182,"start2":1182,"length1":17,"length2":16},{"diffs":[[0,"               }"],[-1,"\r"],[0,"\n               "]],"start1":1191,"start2":1191,"length1":33,"length2":32},{"diffs":[[0,"turn attachment;"],[-1,"\r"],[0,"\n           }, t"]],"start1":1225,"start2":1225,"length1":33,"length2":32},{"diffs":[[0,"his)"],[-1,"\r\n\r"],[1,"\n"],[0,"\n   "]],"start1":1257,"start2":1257,"length1":11,"length2":9},{"diffs":[[0,"et(attachments);"],[-1,"\r"],[0,"\n           this"]],"start1":1294,"start2":1294,"length1":33,"length2":32},{"diffs":[[0,"longs_to = this;"],[-1,"\r"],[0,"\n           this"]],"start1":1341,"start2":1341,"length1":33,"length2":32},{"diffs":[[0,"ortAttachments);"],[-1,"\r"],[0,"\n       },\r\n    "]],"start1":1393,"start2":1393,"length1":33,"length2":32},{"diffs":[[0,"ents);\n       },"],[-1,"\r"],[0,"\n       sortAtta"]],"start1":1403,"start2":1403,"length1":33,"length2":32},{"diffs":[[0,"ts: function() {"],[-1,"\r"],[0,"\n           cons"]],"start1":1440,"start2":1440,"length1":33,"length2":32},{"diffs":[[0,"ts_order\"));"],[-1,"\r"],[0,"\n           "]],"start1":1499,"start2":1499,"length1":25,"length2":24},{"diffs":[[0,"nique) {"],[-1,"\r"],[0,"\n       "]],"start1":1588,"start2":1588,"length1":17,"length2":16},{"diffs":[[0,"unique);"],[-1,"\r"],[0,"\n       "]],"start1":1650,"start2":1650,"length1":17,"length2":16},{"diffs":[[0,"et(\"_rev\"));"],[-1,"\r"],[0,"\n           "]],"start1":1703,"start2":1703,"length1":25,"length2":24},{"diffs":[[0,"achment;"],[-1,"\r"],[0,"\n       "]],"start1":1741,"start2":1741,"length1":17,"length2":16},{"diffs":[[0,", this);"],[-1,"\r"],[0,"\n       "]],"start1":1762,"start2":1762,"length1":17,"length2":16},{"diffs":[[0,"hments);"],[-1,"\r"],[0,"\n       "]],"start1":1810,"start2":1810,"length1":17,"length2":16},{"diffs":[[0,"      },"],[-1,"\r"],[0,"\n       "]],"start1":1820,"start2":1820,"length1":17,"length2":16},{"diffs":[[0,"_id\""],[-1,"\r"],[0,"\n   });"],[-1,"\r"],[0,"\n   "],[-1,"\r"],[0,"\n   "]],"start1":1850,"start2":1850,"length1":22,"length2":19},{"diffs":[[0,"extend({"],[-1,"\r"],[0,"\n       "]],"start1":1910,"start2":1910,"length1":17,"length2":16},{"diffs":[[0,"tion() {"],[-1,"\r"],[0,"\n       "]],"start1":1942,"start2":1942,"length1":17,"length2":16},{"diffs":[[0," = this;"],[-1,"\r"],[0,"\n       "]],"start1":1970,"start2":1970,"length1":17,"length2":16},{"diffs":[[0,"</div>\")"],[-1,"\r"],[0,"\n       "]],"start1":2026,"start2":2026,"length1":17,"length2":16},{"diffs":[[0,"table');"],[-1,"\r"],[0,"\n       "]],"start1":2075,"start2":2075,"length1":17,"length2":16},{"diffs":[[0,"rtable({"],[-1,"\r"],[0,"\n       "]],"start1":2108,"start2":2108,"length1":17,"length2":16},{"diffs":[[0,"(a, b) {"],[-1,"\r"],[0,"\n       "]],"start1":2148,"start2":2148,"length1":17,"length2":16},{"diffs":[[0,"rray\"));"],[-1,"\r"],[0,"\n       "]],"start1":2252,"start2":2252,"length1":17,"length2":16},{"diffs":[[0,"           }"],[-1,"\r"],[0,"\n           "]],"start1":2265,"start2":2265,"length1":25,"length2":24},{"diffs":[[0,"     });"],[-1,"\r"],[0,"\n       "]],"start1":2284,"start2":2284,"length1":17,"length2":16},{"diffs":[[0,"   }"],[-1,"\r"],[0,"\n   });"],[-1,"\r"],[0,"\n*/"]],"start1":2297,"start2":2297,"length1":16,"length2":14}]],"length":2311,"saved":false}
{"ts":1360242843993,"patch":[[{"diffs":[[0,"ent\n    });\n"],[1,"    \n"],[0,"    Backbone"]],"start1":243,"start2":243,"length1":24,"length2":29}]],"length":2316,"saved":false}
{"ts":1360242948810,"patch":[[{"diffs":[[0,"            var "],[1,"_"],[0,"attachments = re"]],"start1":421,"start2":421,"length1":32,"length2":33},{"diffs":[[0,"hments;\n"],[1,"            var attachments = new Attachments(_attachments);\n            resp."],[0,"\n       "]],"start1":463,"start2":463,"length1":16,"length2":94}]],"length":2395,"saved":false}
{"ts":1360242954802,"patch":[[{"diffs":[[0,"   resp."],[1,"_attachments = attachments;"],[0,"\n       "]],"start1":541,"start2":541,"length1":16,"length2":43}]],"length":2422,"saved":false}
{"ts":1360242960826,"patch":[[{"diffs":[[0,"(resp);\n"],[1,"            return resp;\n"],[0,"        "]],"start1":600,"start2":600,"length1":16,"length2":41}]],"length":2447,"saved":false}
{"ts":1360243435717,"patch":[[{"diffs":[[0,"sp._attachments;"],[1,"            "],[0,"\n            var"]],"start1":454,"start2":454,"length1":32,"length2":44},{"diffs":[[0,"nts("],[-1,"_attachments);"],[1,");\n            for (key in _attachments) {\n                attachments.add({\n                    id: key,\n                    content_type: _attachments[key].content_type,\n                    length: _attachments[key].length\n                \n                })\n            }"],[0,"\n   "]],"start1":525,"start2":525,"length1":22,"length2":282}]],"length":2719,"saved":false}
{"ts":1360243489589,"patch":[[{"diffs":[[0,"ts;\n"],[-1,"            console.log(resp);\n"],[0,"    "]],"start1":845,"start2":845,"length1":39,"length2":8}]],"length":2688,"saved":false}
{"contributors":[],"silentsave":false,"ts":1360268158884,"patch":[[{"diffs":[[0,"nd({"],[-1,"\n        path: function(type) {\n            return this.collection.url + \"/\" + type + \"-\" + this.get(\"id\")\n        }\n    "],[0,""],[1,""],[0,"});\n"]],"start1":40,"start2":40,"length1":129,"length2":8},{"diffs":[[0,"d({\n"],[-1,"        url: '/home',\n        initialize: function() {\n\n        },\n"],[0,"    "]],"start1":188,"start2":188,"length1":75,"length2":8},{"diffs":[[0,", options) {"],[1,"           "],[0,"\n           "]],"start1":220,"start2":220,"length1":24,"length2":35},{"diffs":[[0,"    var "],[-1,"_"],[0,"attachme"]],"start1":252,"start2":252,"length1":17,"length2":16},{"diffs":[[0,"ments = "],[-1,"resp._a"],[1,"new A"],[0,"ttachmen"]],"start1":266,"start2":266,"length1":23,"length2":21},{"diffs":[[0,"ents"],[-1,";            "],[1,"();"],[0,"\n   "]],"start1":285,"start2":285,"length1":21,"length2":11},{"diffs":[[0,"();\n            "],[-1,"var "],[0,"attachments = ne"]],"start1":289,"start2":289,"length1":36,"length2":32},{"diffs":[[0," attachments"],[-1," = new A"],[1,".url = this.url() + \"/a"],[0,"ttachments()"]],"start1":304,"start2":304,"length1":32,"length2":47},{"diffs":[[0," + \"/attachments"],[-1,"()"],[1,"\""],[0,";\n            fo"]],"start1":333,"start2":333,"length1":34,"length2":33},{"diffs":[[0,"(key in "],[1,"resp."],[0,"_attachm"]],"start1":368,"start2":368,"length1":16,"length2":21},{"diffs":[[0,"t_type: "],[1,"resp."],[0,"_attachm"]],"start1":486,"start2":486,"length1":16,"length2":21},{"diffs":[[0,"length: "],[1,"resp."],[0,"_attachm"]],"start1":551,"start2":551,"length1":16,"length2":21},{"diffs":[[0,"gth\n"],[-1,"                \n"],[0,"    "]],"start1":585,"start2":585,"length1":25,"length2":8},{"diffs":[[0,"       resp."],[-1,"_"],[0,"attachments "]],"start1":627,"start2":627,"length1":25,"length2":24},{"diffs":[[0,"   }"],[-1,"\n    });\n\n    /*   var "],[1,",\n        idAttribute: \"_id\"\n    });\n\n    Backbone.View."],[0,"Atta"]],"start1":696,"start2":696,"length1":31,"length2":64},{"diffs":[[0,".View.Attachment"],[1,"s"],[0," = Backbone.Mode"]],"start1":750,"start2":750,"length1":32,"length2":33},{"diffs":[[0,"ents = Backbone."],[-1,"Model"],[1,"View"],[0,".extend({\n      "]],"start1":763,"start2":763,"length1":37,"length2":36},{"diffs":[[0,"    "],[-1,"path"],[1," render"],[0,": fu"]],"start1":796,"start2":796,"length1":12,"length2":15},{"diffs":[[0,"unction("],[-1,"type"],[0,") {\n    "]],"start1":810,"start2":810,"length1":20,"length2":16},{"diffs":[[0,"    "],[-1,"return this.collection.url + \"/\" + type + \"-\" + this.get(\"id\")\n       }\n   });\n\n   var Attachments = Backbone.Collection.extend({\n       model: Attachment\n   });\n "],[1," \n\n        }\n\n    })\n\n    /*"],[0,"  \n "]],"start1":829,"start2":829,"length1":171,"length2":36}]],"length":2402,"saved":false}
{"ts":1360271242256,"patch":[[{"diffs":[[0,"    "],[-1,"render"],[1,"initialize: function() {\n            var that = this;\n            this.$el.sortable({\n                update"],[0,": fu"]],"start1":797,"start2":797,"length1":14,"length2":116},{"diffs":[[0,"pdate: function("],[1,"event,ui"],[0,") {\n            "]],"start1":904,"start2":904,"length1":32,"length2":40},{"diffs":[[0,"        "],[1," "],[-1,"\n"],[1,"       that.model.set(\"attachments_order\", this.sortable(\"toArray\"))\n                }\n            });\n            "],[0,"\n       "]],"start1":936,"start2":936,"length1":17,"length2":132}]],"length":2627,"saved":false}
{"ts":1360271243223,"patch":[[{"diffs":[[0,"Array\"))"],[1,";"],[0,"\n       "]],"start1":1005,"start2":1005,"length1":16,"length2":17}]],"length":2628,"saved":false}
{"ts":1360272301321,"patch":[[{"diffs":[[0,"    "],[1,"}\n"],[0,"    "],[1,"})"],[0,"\n    "],[1,"\n"],[0,"    "],[-1,"}\n\n"],[1,"Backbone.View.CouchDB = Backbone.View.extend({\n        buildAttachments: function(view) {\n            \n            \n        }\n "],[0,"    "]],"start1":1053,"start2":1053,"length1":24,"length2":153}]],"length":2757,"saved":false}
{"contributors":[],"silentsave":false,"ts":1360437464173,"patch":[[{"diffs":[[0,"s.url = this.url"],[-1,"()"],[0," + \"/attachments"]],"start1":315,"start2":315,"length1":34,"length2":32},{"diffs":[[0,"order\", "],[1,"$("],[0,"this"],[1,")"],[0,".sortabl"]],"start1":978,"start2":978,"length1":20,"length2":23},{"diffs":[[0,"        });\n"],[1,"        },\n        render: function(view) {\n            var that = this;\n            this.model.get(\"attachments\").forEach(function(a) {\n                that.$el.append(new view({model:a }).render().el);\n                \n            })    \n        return this;\n"],[0,"        }\n  "]],"start1":1038,"start2":1038,"length1":24,"length2":285},{"diffs":[[0,"unction(view) {\n"],[1,"\n"],[0,"            \n   "]],"start1":1411,"start2":1411,"length1":32,"length2":33},{"diffs":[[0,"        "],[-1,"\n            "],[1,"var rendered_view = new Backbone.View.Attachments({model:this.model})\n            this.$el.html(rendered_view.render(view).el);\n            return this;"],[0,"\n       "]],"start1":1432,"start2":1432,"length1":29,"length2":168}]],"length":3159,"saved":false}
{"ts":1360439922862,"patch":[[{"diffs":[[0,"this.url"],[1,"()"],[0," + \"/att"]],"start1":323,"start2":323,"length1":16,"length2":18}]],"length":3161,"saved":false}
{"ts":1360439942953,"patch":[[{"diffs":[[0,"nts("],[-1,");\n            attachments.url ="],[1,"{url:"],[0," thi"]],"start1":286,"start2":286,"length1":40,"length2":13},{"diffs":[[0,"chments\""],[1,"})"],[0,";\n      "]],"start1":315,"start2":315,"length1":16,"length2":18}]],"length":3136,"saved":false}
{"ts":1360439958738,"patch":[[{"diffs":[[0,"rl: "],[1,"\""],[0,"t"],[-1,"his.url() + \"/attachments"],[0,"\"});"]],"start1":292,"start2":292,"length1":34,"length2":10}]],"length":3112,"saved":false}
{"ts":1360439983440,"patch":[[{"diffs":[[0,"nts("],[-1,"{url: \"t\"})"],[1,");\n            attachments.url = this.url() + \"/attachments\""],[0,";\n  "]],"start1":286,"start2":286,"length1":19,"length2":68}]],"length":3161,"saved":false}
{"ts":1360440013595,"patch":[[{"diffs":[[0,"new Attachments("],[1,"{url: \"David\"});\n            console.log(attachments.url"],[0,");\n            a"]],"start1":274,"start2":274,"length1":32,"length2":88}]],"length":3217,"saved":false}
{"ts":1360440749433,"patch":[[{"diffs":[[0,"nts("],[-1,"{url: \"David\"});\n            console.log(attachments.url"],[0,");\n "]],"start1":286,"start2":286,"length1":64,"length2":8}]],"length":3161,"saved":false}
{"ts":1360442440617,"patch":[[{"diffs":[[0,"t.model."],[1,"get(\"attachments\")."],[0,"set(\"att"]],"start1":955,"start2":955,"length1":16,"length2":35}]],"length":3180,"saved":false}
{"ts":1360443031009,"patch":[[{"diffs":[[0,"tachment"],[1,",\n        initialize: function() {\n            this.on('attachments_changed', function() {\n                console.log(\"Changed\", this.attachments_order)\n            }, this)    \n        \n        }"],[0,"\n    });"]],"start1":117,"start2":117,"length1":16,"length2":213},{"diffs":[[0,"ments\")."],[-1,"set(\""],[0,"attachme"]],"start1":1171,"start2":1171,"length1":21,"length2":16},{"diffs":[[0,"ts_order"],[-1,"\","],[1," ="],[0," $(this)"]],"start1":1188,"start2":1188,"length1":18,"length2":18},{"diffs":[[0,"le(\"toArray\"));\n"],[1,"                    that.model.get(\"attachments\").trigger(\"attachments_changed\")\n"],[0,"                "]],"start1":1213,"start2":1213,"length1":32,"length2":113}]],"length":3453,"saved":false}
{"ts":1360443074770,"patch":[[{"diffs":[[0,"table(\"toArray\")"],[-1,")"],[0,";\n              "]],"start1":1210,"start2":1210,"length1":33,"length2":32}]],"length":3452,"saved":false}
{"ts":1360449218202,"patch":[[{"diffs":[[0,"ons) {  "],[-1,"         "],[0,"\n       "]],"start1":423,"start2":423,"length1":25,"length2":16},{"diffs":[[0,"            var "],[1,"parsed_"],[0,"attachments = ne"]],"start1":432,"start2":432,"length1":32,"length2":39},{"diffs":[[0,"s = "],[-1,"new Attachments();\n            attachments.url = this.url() + \"/attachments\";\n            for (key in resp._attachments) {\n                attachments.add({\n                    id: key,\n                    content_type: resp._attachments[key].content_type,\n                    length: resp._attachments"],[1,"_.map(resp._attachments, function(value, key, list){\n                return { id: key, content_type: list[key].content_type, length: list"],[0,"[key"]],"start1":465,"start2":465,"length1":310,"length2":145},{"diffs":[[0,"].length"],[1," }"],[0,"\n       "]],"start1":610,"start2":610,"length1":16,"length2":18},{"diffs":[[0,"        "],[-1,"    "],[0,""],[1,""],[0,"})\n     "]],"start1":625,"start2":625,"length1":20,"length2":16},{"diffs":[[0," })\n            "],[-1,"}"],[1,"resp.attachments = new Attachments(parsed_attachments);"],[0,"\n            res"]],"start1":632,"start2":632,"length1":33,"length2":87},{"diffs":[[0,"s);\n            "],[-1,"resp."],[0,"attachments = at"]],"start1":700,"start2":700,"length1":37,"length2":32},{"diffs":[[0,"ents"],[-1," = attachments;"],[1,".url = this.url() + \"/attachments\";\n           "],[0,"\n   "]],"start1":723,"start2":723,"length1":23,"length2":55}]],"length":3364,"saved":false}
{"ts":1360449223726,"patch":[[{"diffs":[[0,"s);\n            "],[1,"resp."],[0,"attachments.url "]],"start1":700,"start2":700,"length1":32,"length2":37}]],"length":3369,"saved":false}
{"ts":1360449347080,"patch":[[{"diffs":[[0,"ments\";\n"],[-1,"           \n"],[0,"        "]],"start1":760,"start2":760,"length1":28,"length2":16},{"diffs":[[0,"ibute: \"_id\""],[1,",\n        toJSON: function(options){\nconsole.log(this.attributes)\n      return _.clone(this.attributes);\n   \n        }"],[0,"\n    });\n\n  "]],"start1":818,"start2":818,"length1":24,"length2":142}]],"length":3475,"saved":false}
{"ts":1360449435764,"patch":[[{"diffs":[[0,"tions){\n"],[-1,"console.log"],[1,"            var server = _.clone"],[0,"(this.at"]],"start1":859,"start2":859,"length1":27,"length2":48},{"diffs":[[0,"tes)"],[-1,"\n"],[1,";\n "],[0,"      "],[-1,"return _.clone(this.attributes)"],[1,"     server.delete attachments;\n            server.delete _attachments;\n            server.attachments_order = this.attachments.attachments_order;\n            console.log(server)\n      return server"],[0,";\n  "]],"start1":912,"start2":912,"length1":46,"length2":215}]],"length":3665,"saved":false}
{"ts":1360449542431,"patch":[[{"diffs":[[0,"        "],[-1,"server."],[0,"delete "],[1,"server."],[0,"attachme"]],"start1":922,"start2":922,"length1":30,"length2":30},{"diffs":[[0,"    "],[-1,"server."],[0,"delete "],[1,"server."],[0,"_att"]],"start1":965,"start2":965,"length1":22,"length2":22}]],"length":3665,"saved":false}
{"ts":1360449562512,"patch":[[{"diffs":[[0,"s);\n"],[-1,"            delete server.attachments;\n            delete server._attachments;\n"],[0,"    "]],"start1":914,"start2":914,"length1":87,"length2":8}]],"length":3586,"saved":false}
{"ts":1360449584865,"patch":[[{"diffs":[[0,"tions){\n"],[1,"            console.log(this.attributes);\n"],[0,"        "]],"start1":859,"start2":859,"length1":16,"length2":58}]],"length":3628,"saved":false}
{"ts":1360449621636,"patch":[[{"diffs":[[0,"    "],[-1,"console.log(this.attributes);"],[0,"\n"],[1,""],[0,"    "]],"start1":875,"start2":875,"length1":38,"length2":9},{"diffs":[[0,"ttributes);\n"],[1,"             console.log(\"s\", server)\n"],[0,"            "]],"start1":919,"start2":919,"length1":24,"length2":62},{"diffs":[[0,"_order;\n"],[1,""],[0,"        "]],"start1":1036,"start2":1036,"length1":16,"length2":16},{"diffs":[[0,"    "],[-1," console.log(server)"],[0,"\n   "]],"start1":1051,"start2":1051,"length1":28,"length2":8}]],"length":3617,"saved":false}
{"ts":1360449664824,"patch":[[{"diffs":[[0,"    var "],[-1,"serve"],[0,"r = _.cl"]],"start1":888,"start2":888,"length1":21,"length2":16},{"diffs":[[0,"og(\"s\", "],[-1,"serve"],[0,"r)\n     "]],"start1":948,"start2":948,"length1":21,"length2":16}]],"length":3607,"saved":false}
{"ts":1360449668435,"patch":[[{"diffs":[[0,"        "],[-1,"serve"],[0,"r.attach"]],"start1":963,"start2":963,"length1":21,"length2":16},{"diffs":[[0,"urn "],[-1,"serve"],[0,"r;\n "]],"start1":1050,"start2":1050,"length1":13,"length2":8}]],"length":3597,"saved":false}
{"ts":1360449700812,"patch":[[{"diffs":[[0,"    "],[-1,"console.log(\"s\", r)"],[0,"\n   "]],"start1":935,"start2":935,"length1":27,"length2":8}]],"length":3578,"saved":false}
{"ts":1360449723976,"patch":[[{"diffs":[[0,");\n             "],[1,"console.log(\"s\", r)"],[0,"\n            r.a"]],"start1":923,"start2":923,"length1":32,"length2":51},{"diffs":[[0,"ts_order = this."],[1,"get(\""],[0,"attachments.atta"]],"start1":982,"start2":982,"length1":32,"length2":37},{"diffs":[[0,"achments"],[1,"\")"],[0,".attachm"]],"start1":1006,"start2":1006,"length1":16,"length2":18}]],"length":3604,"saved":false}
{"ts":1360449744658,"patch":[[{"diffs":[[0,"    "],[-1,"  console.log(\"s\", r)"],[1,"delete r.attachments;\n           delete r._attachments;"],[0,"\n   "]],"start1":933,"start2":933,"length1":29,"length2":63}]],"length":3638,"saved":false}
{"ts":1360449786969,"patch":[[{"diffs":[[0,"ttributes);\n"],[1,"            console.log(r);\n"],[0,"           d"]],"start1":914,"start2":914,"length1":24,"length2":52}]],"length":3666,"saved":false}
{"ts":1360450312142,"patch":[[{"diffs":[[0,"ments\";\n"],[1,"            \n"],[0,"        "]],"start1":760,"start2":760,"length1":16,"length2":29}]],"length":3679,"saved":false}
{"contributors":[],"silentsave":false,"ts":1360522413738,"patch":[[{"diffs":[[0,"\n       "],[1,"/*"],[0," parse: "]],"start1":388,"start2":388,"length1":16,"length2":18},{"diffs":[[0,"ns) {  \n"],[-1,""],[0,"        "]],"start1":426,"start2":426,"length1":16,"length2":16},{"diffs":[[0,"resp;\n        },"],[1,"*/"],[0,"\n        idAttri"]],"start1":802,"start2":802,"length1":32,"length2":34},{"diffs":[[0,"achments"],[-1,"\").attachments"],[0,"_order"],[1,"\")"],[0," = $(thi"]],"start1":1399,"start2":1399,"length1":36,"length2":24},{"diffs":[[0,"\");\n"],[-1,"                    that.model.get(\"attachments\").trigger(\"attachments_changed\")\n"],[0,"    "]],"start1":1443,"start2":1443,"length1":89,"length2":8},{"diffs":[[0,"ar that = this;\n"],[-1,""],[0,"            this"]],"start1":1538,"start2":1538,"length1":32,"length2":32},{"diffs":[[0,"this.model.get(\""],[1,"_"],[0,"attachments\").fo"]],"start1":1566,"start2":1566,"length1":32,"length2":33}]],"length":3591,"saved":false}
{"ts":1360522562650,"patch":[[{"diffs":[[0,"{\n      "],[-1," /*"],[0," parse: "]],"start1":387,"start2":387,"length1":19,"length2":16},{"diffs":[[0,"].length"],[-1," }"],[1,","],[0,"\n       "]],"start1":609,"start2":609,"length1":18,"length2":17},{"diffs":[[0,"    "],[-1,"  })\n"],[0,"      "],[-1,"      resp.attachments = new Attachments(parsed_attachments);"],[1,"url: this.url() + \"/attachments/\" + key}\n            })"],[0,"\n   "]],"start1":625,"start2":625,"length1":80,"length2":69},{"diffs":[[0,"   resp."],[1,"_"],[0,"attachme"]],"start1":700,"start2":700,"length1":16,"length2":17},{"diffs":[[0,"ents"],[-1,".url = this.url() + \"/attachments\";\n            "],[1," = parsed_attachments;"],[0,"\n   "]],"start1":716,"start2":716,"length1":56,"length2":30}]],"length":3551,"saved":false}
{"ts":1360522588944,"patch":[[{"diffs":[[0,"      },"],[-1,"*/"],[0,"\n       "]],"start1":770,"start2":770,"length1":18,"length2":16}]],"length":3549,"saved":false}
{"ts":1360522615495,"patch":[[{"diffs":[[0,"ns) {  \n"],[1,"        \n"],[0,"        "]],"start1":423,"start2":423,"length1":16,"length2":25},{"diffs":[[0,"           }"],[1,", this"],[0,")\n          "]],"start1":686,"start2":686,"length1":24,"length2":30}]],"length":3564,"saved":false}
{"ts":1360522670571,"patch":[[{"diffs":[[-1,"    var Attachment = Backbone.Model.extend({});\n\n    var Attachments = Backbone.Collection.extend({\n        model: Attachment,\n        initialize: function() {\n            this.on('attachments_changed', function() {\n                console.log(\"Changed\", this.attachments_order)\n            }, this)    \n        \n        }\n    });\n    \n"],[0,"    "]],"start1":0,"start2":0,"length1":340,"length2":4}]],"length":3228,"saved":false}
{"ts":1360522719675,"patch":[[{"diffs":[[0,"nction(a) {\n"],[1,"                console.log(a);\n"],[0,"            "]],"start1":1244,"start2":1244,"length1":24,"length2":56}]],"length":3260,"saved":false}
{"ts":1360522766215,"patch":[[{"diffs":[[0,"    "],[-1,"    console.log(r);\n           delete r.attachments;\n           delete r._attachments;\n            r.attachments_order = this.get(\"attachments\").attachments_order;\n           "],[0,"\n   "]],"start1":584,"start2":584,"length1":183,"length2":8}]],"length":3085,"saved":false}
{"ts":1360524256933,"patch":[[{"diffs":[[0," that.model."],[-1,"g"],[1,"s"],[0,"et(\"attachme"]],"start1":841,"start2":841,"length1":25,"length2":25},{"diffs":[[0,"der\""],[-1,") ="],[1,","],[0," $(t"]],"start1":872,"start2":872,"length1":11,"length2":9},{"diffs":[[0,"oArray\")"],[1,")"],[0,";\n      "]],"start1":897,"start2":897,"length1":16,"length2":17}]],"length":3084,"saved":false}
{"ts":1360526229535,"patch":[[{"diffs":[[0,".model})\n   "],[1,"\n"],[0,"         thi"]],"start1":1426,"start2":1426,"length1":24,"length2":25},{"diffs":[[0,"        "],[-1,"this.$el.html("],[1,"   return "],[0,"rendered"]],"start1":1440,"start2":1440,"length1":30,"length2":26},{"diffs":[[0,").el"],[-1,");\n            return this;"],[0,"\n   "]],"start1":1483,"start2":1483,"length1":35,"length2":8}]],"length":3054,"saved":false}
{"contributors":[],"silentsave":false,"ts":1360528922268,"patch":[[{"diffs":[[0,"ar that = this;\n"],[1,"            that.model.on('change', this.render)\n"],[0,"            this"]],"start1":729,"start2":729,"length1":32,"length2":81}]],"length":3103,"saved":false}
{"ts":1360529074664,"patch":[[{"diffs":[[0,"          th"],[-1,"at"],[1,"is"],[0,".model.on('c"]],"start1":747,"start2":747,"length1":26,"length2":26},{"diffs":[[0,"$el."],[-1,"append"],[1,"html"],[0,"(new"]],"start1":1182,"start2":1182,"length1":14,"length2":12}]],"length":3101,"saved":false}
{"ts":1360529145553,"patch":[[{"diffs":[[0,"ar that = this;\n"],[1,"            this.$empty();\n"],[0,"            this"]],"start1":1048,"start2":1048,"length1":32,"length2":59},{"diffs":[[0,"hat.$el."],[-1,"html"],[1,"appenel.d"],[0,"(new vie"]],"start1":1205,"start2":1205,"length1":20,"length2":25}]],"length":3133,"saved":false}
{"ts":1360529151498,"patch":[[{"diffs":[[0,"  this.$"],[1,"el."],[0,"empty();"]],"start1":1074,"start2":1074,"length1":16,"length2":19},{"diffs":[[0,"el.appen"],[-1,"el."],[0,"d(new vi"]],"start1":1213,"start2":1213,"length1":19,"length2":16}]],"length":3133,"saved":false}
{"ts":1360529181848,"patch":[[{"diffs":[[0,"s.render"],[1,", th"],[0,")\n      "]],"start1":784,"start2":784,"length1":16,"length2":20},{"diffs":[[0,"\n            });"],[1,"is"],[0,"\n        },\n    "]],"start1":978,"start2":978,"length1":32,"length2":34}]],"length":3139,"saved":false}
{"ts":1360529185763,"patch":[[{"diffs":[[0,"nder, th"],[1,"is"],[0,")\n      "]],"start1":788,"start2":788,"length1":16,"length2":18},{"diffs":[[0,"     });"],[-1,"is"],[0,"\n       "]],"start1":988,"start2":988,"length1":18,"length2":16}]],"length":3139,"saved":false}
{"ts":1360529582947,"patch":[[{"diffs":[[0,"is;\n"],[-1,"            this.model.on('change', this.render, this)\n"],[0,"    "]],"start1":741,"start2":741,"length1":63,"length2":8},{"diffs":[[0,"is;\n"],[-1,"            this.$el.empty();\n"],[0,"    "]],"start1":1011,"start2":1011,"length1":38,"length2":8}]],"length":3054,"saved":false}
{"ts":1360529621207,"patch":[[{"diffs":[[0,"e.View.extend({\n"],[1,"        addAttachment: function() {\n            \n            this.$el.append(\"Add attachment\")\n        },\n"],[0,"        buildAtt"]],"start1":1293,"start2":1293,"length1":32,"length2":138}]],"length":3160,"saved":false}
{"ts":1360530445502,"patch":[[{"diffs":[[0,"unction("],[1,") {\n            console.log(this."],[0,"view)"],[-1," {"],[0,"\n       "]],"start1":970,"start2":970,"length1":23,"length2":54},{"diffs":[[0,"is.model"],[1,", view; view"],[0,"})\n   \n "]],"start1":1561,"start2":1561,"length1":16,"length2":28},{"diffs":[[0,".render("],[-1,"view"],[0,").el\n   "]],"start1":1620,"start2":1620,"length1":20,"length2":16}]],"length":3199,"saved":false}
{"ts":1360530454853,"patch":[[{"diffs":[[0,"el, view"],[-1,";"],[1,":"],[0," view})\n"]],"start1":1567,"start2":1567,"length1":17,"length2":17}]],"length":3199,"saved":false}
{"ts":1360530948395,"patch":[[{"diffs":[[0,"og(this."],[1,"options."],[0,"view)\n  "]],"start1":1003,"start2":1003,"length1":16,"length2":24}]],"length":3207,"saved":false}
{"ts":1360531023300,"patch":[[{"diffs":[[0,"end(new "],[1,"this.options."],[0,"view({mo"]],"start1":1179,"start2":1179,"length1":16,"length2":29}]],"length":3220,"saved":false}
{"ts":1360531038264,"patch":[[{"diffs":[[0,"d(new th"],[-1,"is"],[1,"at"],[0,".options"]],"start1":1181,"start2":1181,"length1":18,"length2":18}]],"length":3220,"saved":false}
{"ts":1360531046483,"patch":[[{"diffs":[[0,") {\n"],[-1,"            console.log(this.options.view)\n"],[0,"    "]],"start1":978,"start2":978,"length1":51,"length2":8}]],"length":3177,"saved":false}
{"ts":1360531071061,"patch":[[{"diffs":[[0,"        });\n"],[1,"            that.model.on(\"change\", this.render, this)\n"],[0,"        },\n "]],"start1":930,"start2":930,"length1":24,"length2":79}]],"length":3232,"saved":false}
{"ts":1360531089943,"patch":[[{"diffs":[[0,"ar that = this;\n"],[1,"            this.html.empty();\n"],[0,"            this"]],"start1":1050,"start2":1050,"length1":32,"length2":63}]],"length":3263,"saved":false}
{"ts":1360531093088,"patch":[[{"diffs":[[0,"   this."],[1,"$el."],[0,"html.emp"]],"start1":1075,"start2":1075,"length1":16,"length2":20}]],"length":3267,"saved":false}
{"ts":1360531103505,"patch":[[{"diffs":[[0,"$el."],[-1,"html."],[0,"empt"]],"start1":1083,"start2":1083,"length1":13,"length2":8}]],"length":3262,"saved":false}
{"ts":1360531183175,"patch":[[{"diffs":[[0,"r: function() {\n"],[1,"            console.log(\"Rendering\")\n"],[0,"            var "]],"start1":1021,"start2":1021,"length1":32,"length2":69}]],"length":3299,"saved":false}
{"ts":1360531244858,"patch":[[{"diffs":[[0,"d({\n"],[1,"\n    "],[0,"        "],[-1,"initialize: function() {\n            var that = this"],[1,"that.model.on(\"change\", this.render, this)\n        },\n        render: function() {\n            console.log(\"Rendering\")\n            var that = this;\n            this.$el.empty()"],[0,";\n  "]],"start1":679,"start2":679,"length1":68,"length2":198},{"diffs":[[0,"});\n"],[-1,"            that.model.on(\"change\", this.render, this)\n        },\n        render: function() {\n            console.log(\"Rendering\")\n            var that = this;\n            this.$el.empty();\n"],[0,"    "]],"start1":1068,"start2":1068,"length1":199,"length2":8}]],"length":3238,"saved":false}
{"ts":1360531257292,"patch":[[{"diffs":[[0,"xtend({\n"],[1,"        initialize: function() {"],[0,"\n       "]],"start1":675,"start2":675,"length1":16,"length2":48}]],"length":3270,"saved":false}
{"ts":1360531276131,"patch":[[{"diffs":[[0,"          th"],[-1,"at"],[1,"is"],[0,".model.on(\"c"]],"start1":718,"start2":718,"length1":26,"length2":26}]],"length":3270,"saved":false}
{"ts":1360531417922,"patch":[[{"diffs":[[0,"le(\"toArray\"));\n"],[1,"                    console.log($(this).sortable(\"toArray\"))\n"],[0,"                "]],"start1":1054,"start2":1054,"length1":32,"length2":93}]],"length":3331,"saved":false}
{"ts":1360531552417,"patch":[[{"diffs":[[0,"{model:a"],[1,", attributes: { id: a.id "],[0," }).rend"]],"start1":1316,"start2":1316,"length1":16,"length2":41},{"diffs":[[0,"                "],[1,"}"],[0,"\n            }) "]],"start1":1367,"start2":1367,"length1":32,"length2":33}]],"length":3357,"saved":false}
{"ts":1360531577404,"patch":[[{"diffs":[[0,": a.id  "],[1,"}"],[0,"}).rende"]],"start1":1342,"start2":1342,"length1":16,"length2":17}]],"length":3358,"saved":false}
{"ts":1360531618383,"patch":[[{"diffs":[[0,"el:a"],[-1,", attributes: { id: a.id  }"],[1," "],[0,"}).r"]],"start1":1320,"start2":1320,"length1":35,"length2":9},{"diffs":[[0,"                "],[-1,"}"],[0,"\n            }) "]],"start1":1342,"start2":1342,"length1":33,"length2":32}]],"length":3331,"saved":false}
{"ts":1360531635505,"patch":[[{"diffs":[[0,"{model:a"],[1,", attributes: {id: a.id"],[0," }).rend"]],"start1":1316,"start2":1316,"length1":16,"length2":39}]],"length":3354,"saved":false}
{"ts":1360531642596,"patch":[[{"diffs":[[0,"id: a.id"],[1,"}"],[0," }).rend"]],"start1":1339,"start2":1339,"length1":16,"length2":17}]],"length":3355,"saved":false}
{"contributors":[],"silentsave":false,"ts":1360591536324,"patch":[[{"diffs":[[-1,"    "],[0,"Backbone.Model.C"]],"start1":0,"start2":0,"length1":20,"length2":16},{"diffs":[[0,"d({\n    "],[-1,"   "],[0,"parse: f"]],"start1":45,"start2":45,"length1":19,"length2":16},{"diffs":[[0,"s) {"],[-1,"  \n        \n    "],[1,"\n\n"],[0,"    "]],"start1":81,"start2":81,"length1":24,"length2":10},{"diffs":[[0,"y, list)"],[1," "],[0,"{\n"],[-1,"    "],[0,"        "]],"start1":163,"start2":163,"length1":22,"length2":19},{"diffs":[[0,"rn {"],[-1," id: key,"],[1,"\n                id: key,\n               "],[0," con"]],"start1":190,"start2":190,"length1":17,"length2":49},{"diffs":[[0,"nt_type,"],[1,"\n               "],[0," length:"]],"start1":265,"start2":265,"length1":16,"length2":32},{"diffs":[[0,"/\" + key"],[-1,"}"],[0,"\n    "],[1,"        }\n"],[0,"        "]],"start1":363,"start2":363,"length1":22,"length2":31},{"diffs":[[0,"   }, this)\n"],[-1,"    "],[0,"        resp"]],"start1":391,"start2":391,"length1":28,"length2":24},{"diffs":[[0,"hments;\n        "],[-1,"    "],[0,"return resp;\n   "]],"start1":443,"start2":443,"length1":36,"length2":32},{"diffs":[[0,"n resp;\n    "],[-1,"    },\n    "],[1,"},\n"],[0,"    idAttrib"]],"start1":464,"start2":464,"length1":35,"length2":27},{"diffs":[[0," \"_id\",\n"],[-1,"    "],[0,"    toJS"]],"start1":495,"start2":495,"length1":20,"length2":16},{"diffs":[[0,"options)"],[1," "],[0,"{\n"],[-1,"            \n    "],[1,"\n"],[0,"        "]],"start1":524,"start2":524,"length1":35,"length2":20},{"diffs":[[0,"butes);\n"],[-1,"      "],[1,"\n"],[0,"  "],[-1,"\n"],[0,"      re"]],"start1":570,"start2":570,"length1":25,"length2":19},{"diffs":[[0," r;\n"],[-1,"   "],[0,"\n    "],[-1,"    }\n    "],[1,"}\n"],[0,"});\n\n"],[-1,"    "],[0,"Back"]],"start1":593,"start2":593,"length1":35,"length2":20},{"diffs":[[0,"ew.extend({\n"],[-1,"    "],[0,"    initiali"]],"start1":648,"start2":648,"length1":28,"length2":24},{"diffs":[[0,"ion() {\n        "],[-1,"  "],[-1,"  "],[0,"this.model.on(\"c"]],"start1":681,"start2":681,"length1":36,"length2":32},{"diffs":[[0,", this)\n    "],[-1,"    },\n    "],[1,"},\n"],[0,"    render: "]],"start1":732,"start2":732,"length1":35,"length2":27},{"diffs":[[0,"ion() {\n        "],[-1,"   "],[-1," "],[0,"console.log(\"Ren"]],"start1":764,"start2":764,"length1":36,"length2":32},{"diffs":[[0,"g\")\n        "],[-1,"    "],[0,"var that = t"]],"start1":801,"start2":801,"length1":28,"length2":24},{"diffs":[[0,"= this;\n        "],[-1," "],[-1,"   "],[0,"this.$el.empty()"]],"start1":822,"start2":822,"length1":36,"length2":32},{"diffs":[[0,"mpty();\n        "],[-1,"   "],[-1," "],[0,"this.$el.sortabl"]],"start1":848,"start2":848,"length1":36,"length2":32},{"diffs":[[0,".$el.sortable({\n"],[-1,"    "],[0,"            upda"]],"start1":868,"start2":868,"length1":36,"length2":32},{"diffs":[[0,"ent,"],[1," "],[0,"ui) {\n"],[-1,"    "],[0,"    "]],"start1":915,"start2":915,"length1":18,"length2":15},{"diffs":[[0,"                "],[-1,"   "],[-1," "],[0,"console.log($(th"]],"start1":1008,"start2":1008,"length1":36,"length2":32},{"diffs":[[0,"        "],[-1,"    }\n  "],[1,"}\n"],[0,"        "],[-1,"  "],[0,"});\n    "]],"start1":1069,"start2":1069,"length1":34,"length2":26},{"diffs":[[0,"});\n        "],[-1,"   "],[-1," "],[0,"this.model.g"]],"start1":1087,"start2":1087,"length1":28,"length2":24},{"diffs":[[0,") {\n            "],[-1,"    "],[0,"console.log(a);\n"]],"start1":1148,"start2":1148,"length1":36,"length2":32},{"diffs":[[0,"            "],[-1,"  "],[-1,"  "],[0,"that.$el.app"]],"start1":1180,"start2":1180,"length1":28,"length2":24},{"diffs":[[0,"ew({"],[1,"\n                "],[0,"model:"],[1," "],[0,"a,"],[-1," attributes: {id: a.id} }).render().el);"],[1,"\n                attributes: {\n                    id: a.id"],[0,"\n   "]],"start1":1227,"start2":1227,"length1":56,"length2":93},{"diffs":[[0,"                "],[1,"}"],[0,"\n            }) "]],"start1":1317,"start2":1317,"length1":32,"length2":33},{"diffs":[[0,"      })"],[-1,"    "],[1,".render().el);\n\n        })"],[0,"\n       "]],"start1":1341,"start2":1341,"length1":20,"length2":42},{"diffs":[[0,"    "],[-1,"    }\n    })\n    \n    "],[1,"}\n})\n\n"],[0,"Back"]],"start1":1397,"start2":1397,"length1":30,"length2":14},{"diffs":[[0,"xtend({\n"],[-1,"    "],[0,"    addA"]],"start1":1446,"start2":1446,"length1":20,"length2":16},{"diffs":[[0,") {\n"],[-1,"            \n    "],[0,"    "]],"start1":1482,"start2":1482,"length1":25,"length2":8},{"diffs":[[0,"t\")\n    "],[-1,"   "],[-1," "],[0,"},\n"],[-1,"    "],[0,"    buil"]],"start1":1524,"start2":1524,"length1":27,"length2":19},{"diffs":[[0," {\n\n        "],[-1," "],[-1,"   "],[0,"var rendered"]],"start1":1571,"start2":1571,"length1":28,"length2":24},{"diffs":[[0,"hments({"],[1,"\n            "],[0,"model:"],[1," "],[0,"this.mod"]],"start1":1626,"start2":1626,"length1":22,"length2":36},{"diffs":[[0,"s.model,"],[1,"\n           "],[0," view: v"]],"start1":1657,"start2":1657,"length1":16,"length2":28},{"diffs":[[0,"view"],[-1,"})"],[0,"\n   "],[-1,"\n"],[1," "],[0,"    "],[1,"})\n\n"],[0,"    "]],"start1":1684,"start2":1684,"length1":19,"length2":21},{"diffs":[[0,"    "],[-1,"    }\n     })\n\n    "],[1,"}\n})\n\n"],[0,"/*  "]],"start1":1742,"start2":1742,"length1":27,"length2":14}]],"length":3295,"saved":false}
{"ts":1360591541635,"patch":[[{"diffs":[[0,"tion(options) {\n"],[-1,"\n"],[0,"        var r = "]],"start1":519,"start2":519,"length1":33,"length2":32},{"diffs":[[0,"butes);\n"],[-1,"\n"],[0,"        "]],"start1":569,"start2":569,"length1":17,"length2":16},{"diffs":[[0,"turn r;\n"],[-1,"\n"],[0,"    }\n})"]],"start1":587,"start2":587,"length1":17,"length2":16}]],"length":3292,"saved":false}
{"ts":1360591594820,"patch":[[{"diffs":[[0,") {\n"],[-1,"            console.log(a);\n"],[0,"    "]],"start1":1145,"start2":1145,"length1":36,"length2":8},{"diffs":[[0,"().el);\n"],[-1,"\n"],[0,"        "]],"start1":1325,"start2":1325,"length1":17,"length2":16}]],"length":3263,"saved":false}
{"ts":1360591597614,"patch":[[{"diffs":[[0,") {\n"],[-1,"        console.log(\"Rendering\")\n"],[0,"    "]],"start1":765,"start2":765,"length1":41,"length2":8}]],"length":3230,"saved":false}
{"ts":1360591655920,"patch":[[{"diffs":[[1,"\n\n"],[0,"Backbone.Model.CouchDB = Bac"]],"start1":0,"start2":0,"length1":28,"length2":30}]],"length":3232,"saved":false}
{"ts":1360592226484,"patch":[[{"diffs":[[1,"Backbone.Model.Attachment = Backbone.Model.extend({})\n\nBackbone.Collection.Attachments = Backbone.Collection.extend({\n    model: Backbone.Model.Attachment \n})"],[0,"\n\nBackbone.Model"]],"start1":0,"start2":0,"length1":16,"length2":174}]],"length":3390,"saved":false}
{"ts":1360592308353,"patch":[[{"diffs":[[0,"    "],[-1,"    url: this.url() + \"/attachments/\" + key\n            }\n        }, this)"],[1,"}\n        }, this)\n        var attachments = new Backbone.Collection.Attachments(parsed_attachments)\n        attachments.url = this.url() + \"/attachments\""],[0,"\n   "]],"start1":484,"start2":484,"length1":82,"length2":162}]],"length":3470,"saved":false}
{"ts":1360592316719,"patch":[[{"diffs":[[0,"ments = "],[-1,"parsed_"],[0,"attachme"]],"start1":663,"start2":663,"length1":23,"length2":16}]],"length":3463,"saved":false}
{"ts":1360595400477,"patch":[[{"diffs":[[0,"el.get(\""],[-1,"_"],[0,"attachme"]],"start1":1304,"start2":1304,"length1":17,"length2":16},{"diffs":[[0,"achments"],[1,"_order"],[0,"\").forEa"]],"start1":1315,"start2":1315,"length1":16,"length2":22}]],"length":3468,"saved":false}
{"ts":1360595489440,"patch":[[{"diffs":[[0,"unction("],[-1,"a"],[1,"key"],[0,") {\n    "]],"start1":1341,"start2":1341,"length1":17,"length2":19},{"diffs":[[0,"el: "],[-1,"a,\n                attributes: {\n                    id: a.id\n                }"],[1,"this.model.get(\"_attachments\").get(key))"],[0,"\n   "]],"start1":1427,"start2":1427,"length1":87,"length2":48}]],"length":3431,"saved":false}
{"ts":1360595516105,"patch":[[{"diffs":[[0,"get(key)"],[-1,")"],[0,"\n       "]],"start1":1462,"start2":1462,"length1":17,"length2":16}]],"length":3430,"saved":false}
{"ts":1360595526348,"patch":[[{"diffs":[[0,"   model: th"],[-1,"is"],[1,"at"],[0,".model.get(\""]],"start1":1421,"start2":1421,"length1":26,"length2":26}]],"length":3430,"saved":false}
{"ts":1360595544041,"patch":[[{"diffs":[[0,"tion(key) {\n"],[1,"            console.log(key)\n"],[0,"            "]],"start1":1344,"start2":1344,"length1":24,"length2":53}]],"length":3459,"saved":false}
{"ts":1360595563083,"patch":[[{"diffs":[[0,"        });\n"],[1,"        console.log(this.model.get(\"attachments_order\"))\n"],[0,"        this"]],"start1":1276,"start2":1276,"length1":24,"length2":81}]],"length":3516,"saved":false}
{"ts":1360596992770,"patch":[[{"diffs":[[0,"vent, ui) {\n"],[1,"                console.log($(this).sortable(\"toArray\"))\n"],[0,"            "]],"start1":1111,"start2":1111,"length1":24,"length2":81}]],"length":3573,"saved":false}
{"ts":1360597044411,"patch":[[{"diffs":[[0,".view({\n"],[1,"                attributes: { id: key },\n"],[0,"        "]],"start1":1543,"start2":1543,"length1":16,"length2":57}]],"length":3614,"saved":false}
{"ts":1360597896115,"patch":[[{"diffs":[[0,"});\n"],[-1,"        console.log(this.model.get(\"attachments_order\"))\n"],[0,"    "]],"start1":1341,"start2":1341,"length1":65,"length2":8}]],"length":3557,"saved":false}
{"ts":1360597899695,"patch":[[{"diffs":[[0,"d({\n"],[-1,"    initialize: function() {\n        this.model.on(\"change\", this.render, this)\n    },"],[0,"\n   "]],"start1":886,"start2":886,"length1":94,"length2":8}]],"length":3471,"saved":false}
{"ts":1360598103477,"patch":[[{"diffs":[[0,"xtend({\n"],[1,"    initialize: function() {\n        this.model.get(\"_attachments\").on(\"add\", this.addAttachment, this)\n    },\n    addAttachment: function() {\n      this.$el.append(\"Add attachment!\")  \n        \n    },"],[0,"\n    ren"]],"start1":882,"start2":882,"length1":16,"length2":217}]],"length":3672,"saved":false}
{"ts":1360598258999,"patch":[[{"diffs":[[0,"his."],[-1,"$el.append(\"Add attachment\""],[1,"model.get(\"attachments_order\").add({}"],[0,")\n  "]],"start1":1872,"start2":1872,"length1":35,"length2":45}]],"length":3682,"saved":false}
{"ts":1360598278983,"patch":[[{"diffs":[[0,"end(\"Add"],[1,"ed"],[0," attachm"]],"start1":1051,"start2":1051,"length1":16,"length2":18},{"diffs":[[0,")  \n"],[-1,"        \n"],[0,"    "]],"start1":1074,"start2":1074,"length1":17,"length2":8}]],"length":3675,"saved":false}
{"ts":1360598340356,"patch":[[{"diffs":[[0,"this.model.get(\""],[1,"_"],[0,"attachments_orde"]],"start1":1864,"start2":1864,"length1":32,"length2":33},{"diffs":[[0,"achments"],[-1,"_order"],[0,"\").add({"]],"start1":1884,"start2":1884,"length1":22,"length2":16}]],"length":3670,"saved":false}
{"ts":1360598375301,"patch":[[{"diffs":[[0,"\n})\n"],[-1,"\n/*  \n   Backbone.Model.CouchDB = Backbone.Model.extend({\n       initialize: function() {\n           this.attachments = new Attachments();\n           this.attachments.url = this.url() + \"/attachments\"\n           var model = this;\n           var attachments = _.map(this.get(\"attachments_order\"), function(unique) {\n               var attachment = {\n                   id: unique,\n                   _rev: model.get(\"_rev\"),\n               }\n               return attachment;\n           }, this)\n\n           this.attachments.reset(attachments);\n           this.attachments.belongs_to = this;\n           this.on('change', this.sortAttachments);\n       },\n       sortAttachments: function() {\n           console.log(this.get(\"attachments_order\"));\n           var attachments = _.map(this.get(\"attachments_order\"), function(unique) {\n               var attachment = this.attachments.get(unique);\n               attachment.set(\"_rev\", this.get(\"_rev\"));\n               return attachment;\n           }, this);\n           this.attachments.reset(attachments);\n       },\n       idAttribute: \"_id\"\n   });\n   \n   Backbone.View.Attachment = Backbone.View.extend({\n       initialize: function() {\n           var that = this;\n           this.$el.html(\"<div id=\\\"sortable\\\"></div>\")\n           var sortableEl = this.$('#sortable');\n           sortableEl.sortable({\n               update: function(a, b) {\n                   that.collection.belongs_to.set(\"attachments_order\", sortableEl.sortable(\"toArray\"));\n               }\n           });\n       }\n   });\n*/"]],"start1":2122,"start2":2122,"length1":1548,"length2":4}]],"length":2126,"saved":false}
{"ts":1360598870394,"patch":[[{"diffs":[[0,"_id\""],[-1,",\n    toJSON: function(options) {\n        var r = _.clone(this.attributes);\n        return r;\n    }"],[0,"\n});"]],"start1":730,"start2":730,"length1":107,"length2":8}]],"length":2027,"saved":false}
{"ts":1360598874208,"patch":[[{"diffs":[[0," options) {\n"],[-1,"\n"],[0,"        var "]],"start1":234,"start2":234,"length1":25,"length2":24}]],"length":2026,"saved":false}
{"ts":1360599450937,"patch":[[{"diffs":[[0,"        "],[-1,"var "],[1,"resp._"],[0,"attachme"]],"start1":506,"start2":506,"length1":20,"length2":22},{"diffs":[[0,"        "],[1,"resp._"],[0,"attachme"]],"start1":590,"start2":590,"length1":16,"length2":22},{"diffs":[[0,"ts\"\n"],[-1,"        resp._attachments = attachments;\n"],[0,"    "]],"start1":646,"start2":646,"length1":49,"length2":8}]],"length":1993,"saved":false}
{"ts":1360599475350,"patch":[[{"diffs":[[0,") {\n"],[-1,"                console.log($(this).sortable(\"toArray\"))\n"],[0,"    "]],"start1":1094,"start2":1094,"length1":65,"length2":8},{"diffs":[[0,"));\n"],[-1,"                console.log($(this).sortable(\"toArray\"))\n"],[0,"    "]],"start1":1176,"start2":1176,"length1":65,"length2":8},{"diffs":[[0,") {\n"],[-1,"            console.log(key)\n"],[0,"    "]],"start1":1270,"start2":1270,"length1":37,"length2":8}]],"length":1850,"saved":false}
{"ts":1360599489629,"patch":[[{"diffs":[[0,"view) {\n"],[-1,"\n"],[0,"        "]],"start1":1665,"start2":1665,"length1":17,"length2":16},{"diffs":[[0,"     })\n"],[-1,"\n"],[0,"        "]],"start1":1790,"start2":1790,"length1":17,"length2":16}]],"length":1848,"saved":false}
{"ts":1360599713709,"patch":[[{"diffs":[[0,"hment: function("],[1,"model"],[0,") {\n      this.$"]],"start1":880,"start2":880,"length1":32,"length2":37},{"diffs":[[0,"d: key }"],[1,", model: model"],[0,"}))  \n  "]],"start1":963,"start2":963,"length1":16,"length2":30}]],"length":1894,"saved":false}
{"ts":1360599731702,"patch":[[{"diffs":[[0,"ns.view("],[1,"{"],[0,"attribut"]],"start1":941,"start2":941,"length1":16,"length2":17}]],"length":1895,"saved":false}
{"ts":1360599745898,"patch":[[{"diffs":[[0,"el.append(new th"],[-1,"at"],[1,"is"],[0,".options.view({a"]],"start1":917,"start2":917,"length1":34,"length2":34}]],"length":1895,"saved":false}
{"ts":1360599757534,"patch":[[{"diffs":[[0,"on(model) {\n"],[1,"        console.log(model)\n"],[0,"      this.$"]],"start1":893,"start2":893,"length1":24,"length2":51}]],"length":1922,"saved":false}
{"ts":1360599783199,"patch":[[{"diffs":[[0," model})"],[1,".render().el"],[0,")  \n    "]],"start1":1007,"start2":1007,"length1":16,"length2":28}]],"length":1934,"saved":false}
{"ts":1360601717310,"patch":[[{"diffs":[[0,"        "],[-1,"return "],[1,"var a = new Backbone.Model.Attachment("],[0,"{\n      "]],"start1":337,"start2":337,"length1":23,"length2":54},{"diffs":[[0,"h,\n            }"],[1,")\n            a.on('destroy', this.remove, this)  "],[0,"\n        }, this"]],"start1":503,"start2":503,"length1":32,"length2":82}]],"length":2015,"saved":false}
{"ts":1360601719776,"patch":[[{"diffs":[[0,"e, this)"],[1,"\n"],[0,"  "],[1,"          return a;"],[0,"\n       "]],"start1":559,"start2":559,"length1":18,"length2":38}]],"length":2035,"saved":false}
{"ts":1360601819381,"patch":[[{"diffs":[[0," })\n"],[-1,"            a.on('destroy', this.remove, this)\n"],[0,"    "]],"start1":517,"start2":517,"length1":55,"length2":8}]],"length":1988,"saved":false}
{"ts":1360601891399,"patch":[[{"diffs":[[0,"    "],[-1,"this.$el.append("],[1,"  var v = "],[0,"new "]],"start1":988,"start2":988,"length1":24,"length2":18},{"diffs":[[0," model})"],[1,";\n            v.listenTo(model, 'destroy', view.remove)\n      this.$el.append("],[0,".render("]],"start1":1055,"start2":1055,"length1":16,"length2":94}]],"length":2060,"saved":false}
{"ts":1360601895586,"patch":[[{"diffs":[[0,".append("],[1,"v"],[0,".render("]],"start1":1133,"start2":1133,"length1":16,"length2":17}]],"length":2061,"saved":false}
{"ts":1360601910585,"patch":[[{"diffs":[[0,"stroy', "],[1,"this.options."],[0,"view.rem"]],"start1":1098,"start2":1098,"length1":16,"length2":29}]],"length":2074,"saved":false}
{"ts":1360602016249,"patch":[[{"diffs":[[0,"        "],[-1,"    "],[0,"v.listen"]],"start1":1065,"start2":1065,"length1":20,"length2":16},{"diffs":[[0,"remove)\n"],[1,"  "],[0,"      th"]],"start1":1120,"start2":1120,"length1":16,"length2":18}]],"length":2072,"saved":false}
{"ts":1360602024966,"patch":[[{"diffs":[[0,"y', "],[-1,"this.options.view.r"],[1,"function() { console.log(\"R"],[0,"emove"],[1,"\")}"],[0,")\n  "]],"start1":1098,"start2":1098,"length1":32,"length2":43}]],"length":2083,"saved":false}
{"ts":1360602044539,"patch":[[{"diffs":[[0,"y', "],[-1,"function() { console.log(\"R"],[1,"v.r"],[0,"emove"],[-1,"\")"],[0,"})\n "]],"start1":1098,"start2":1098,"length1":42,"length2":16}]],"length":2057,"saved":false}
{"ts":1360602052650,"patch":[[{"diffs":[[0,"v.remove"],[-1,"}"],[0,")\n      "]],"start1":1102,"start2":1102,"length1":17,"length2":16}]],"length":2056,"saved":false}
{"ts":1360602495901,"patch":[[{"diffs":[[0,"tachment"],[-1," "],[0,"\n})\n\nBac"]],"start1":146,"start2":146,"length1":17,"length2":16},{"diffs":[[0,") {\n"],[-1,"        console.log(model)\n"],[0,"    "]],"start1":954,"start2":954,"length1":35,"length2":8},{"diffs":[[0,"ew({"],[-1,"attributes: {id: key },"],[1,"\n            attributes: {\n                id: key\n            },\n           "],[0," mod"]],"start1":993,"start2":993,"length1":31,"length2":85},{"diffs":[[0,"l: model"],[1,"\n        "],[0,"});\n    "]],"start1":1079,"start2":1079,"length1":16,"length2":25},{"diffs":[[0,"remove)\n"],[1,""],[0,"        "]],"start1":1139,"start2":1139,"length1":16,"length2":16},{"diffs":[[0,"er().el)"],[-1,"  "],[0,"\n    },\n"]],"start1":1177,"start2":1177,"length1":18,"length2":16},{"diffs":[[0,"butes: {"],[-1," id: key"],[1,"\n                    id: key\n               "],[0," },\n    "]],"start1":1588,"start2":1588,"length1":24,"length2":60}]],"length":2125,"saved":false}
{"ts":1360602748358,"patch":[[{"diffs":[[0,"d\"\n});\n\n"],[1,"// VIEW \n// Attachments\n\n"],[0,"Backbone"]],"start1":751,"start2":751,"length1":16,"length2":41},{"diffs":[[0,";\n    }\n})\n\n"],[1,"// VIEW \n// CouchDB Model\n"],[0,"Backbone.Vie"]],"start1":1791,"start2":1791,"length1":24,"length2":50}]],"length":2176,"saved":false}
{"ts":1360602764289,"patch":[[{"diffs":[[0,"B Model\n"],[1,"\n"],[0,"Backbone"]],"start1":1821,"start2":1821,"length1":16,"length2":17}]],"length":2177,"saved":false}
{"ts":1360602787530,"patch":[[{"diffs":[[0,"    "],[-1,"var a = new Backbone.Model.Attachment("],[1,"return "],[0,"{\n  "]],"start1":340,"start2":340,"length1":46,"length2":15},{"diffs":[[0," })\n"],[-1,"            return a;\n"],[0,"    "]],"start1":485,"start2":485,"length1":30,"length2":8}]],"length":2124,"saved":false}
{"ts":1360602789145,"patch":[[{"diffs":[[0,"h,\n            }"],[-1,")"],[0,"\n        }, this"]],"start1":471,"start2":471,"length1":33,"length2":32}]],"length":2123,"saved":false}
{"ts":1360602833496,"patch":[[{"diffs":[[0,"  }\n        });\n"],[1,"        console.log(that.model.cid)\n"],[0,"        this.mod"]],"start1":1402,"start2":1402,"length1":32,"length2":68}]],"length":2159,"saved":false}
{"ts":1360602897152,"patch":[[{"diffs":[[0,"on(model) {\n"],[1,"        console.log(model)\n"],[0,"        var "]],"start1":917,"start2":917,"length1":24,"length2":51},{"diffs":[[0,"});\n"],[-1,"        console.log(that.model.cid)\n"],[0,"    "]],"start1":1441,"start2":1441,"length1":44,"length2":8}]],"length":2150,"saved":false}
{"ts":1360602934488,"patch":[[{"diffs":[[0,") {\n"],[-1,"        console.log(model)\n"],[0,"    "]],"start1":925,"start2":925,"length1":35,"length2":8},{"diffs":[[0,"            id: "],[-1,"key"],[1,"model.cid"],[0,"\n            },\n"]],"start1":999,"start2":999,"length1":35,"length2":41}]],"length":2129,"saved":false}
{"ts":1360604113732,"patch":[[{"diffs":[[0,".model.s"],[1,"av"],[0,"e"],[-1,"t"],[0,"(\"attach"]],"start1":1336,"start2":1336,"length1":18,"length2":19}]],"length":2130,"saved":false}
{"ts":1360604132635,"patch":[[{"diffs":[[0,"oArray\")"],[1,", {patch: true}"],[0,");\n     "]],"start1":1388,"start2":1388,"length1":16,"length2":31}]],"length":2145,"saved":false}
{"ts":1360605541172,"patch":[[{"diffs":[[0,"el.s"],[-1,"av"],[0,"e"],[1,"t"],[0,"(\"at"]],"start1":1340,"start2":1340,"length1":11,"length2":10},{"diffs":[[0,"der\""],[-1,", $(this).sortable(\"toArray\"), {patch: true}"],[0,");\n "]],"start1":1362,"start2":1362,"length1":52,"length2":8}]],"length":2100,"saved":false}
{"ts":1360605653272,"patch":[[{"diffs":[[0,".model.s"],[1,"av"],[0,"e"],[-1,"t"],[0,"(\"attach"]],"start1":1336,"start2":1336,"length1":18,"length2":19},{"diffs":[[0,"s_order\""],[1,", $(this).sortable(\"toArray\"), {patch: true}"],[0,");\n     "]],"start1":1359,"start2":1359,"length1":16,"length2":60}]],"length":2145,"saved":false}
{"ts":1360605960445,"patch":[[{"diffs":[[0,"el.s"],[-1,"av"],[0,"e"],[1,"t"],[0,"(\"at"]],"start1":1340,"start2":1340,"length1":11,"length2":10},{"diffs":[[0,"der\""],[-1,", $(this).sortable(\"toArray\"), {patch: true}"],[0,");\n "]],"start1":1362,"start2":1362,"length1":52,"length2":8}]],"length":2100,"saved":false}
{"ts":1360606016147,"patch":[[{"diffs":[[0,"el.extend({\n"],[1,"    initialize: function() {\n        \n    this.on('change:attachments_order', function() {\n        this.save(\"attachments_order\", { patch: true})\n    }, this)\n    },\n"],[0,"    parse: f"]],"start1":196,"start2":196,"length1":24,"length2":190},{"diffs":[[0,"s_order\""],[1,", $(this).sortable(\"toArray\")"],[0,");\n     "]],"start1":1524,"start2":1524,"length1":16,"length2":45}]],"length":2295,"saved":false}
{"ts":1360606049824,"patch":[[{"diffs":[[0,"() {\n       "],[1,"//"],[0," this.save(\""]],"start1":294,"start2":294,"length1":24,"length2":26}]],"length":2297,"saved":false}
{"ts":1360606072163,"patch":[[{"diffs":[[0,"\n       "],[-1,"//"],[0," this.sa"]],"start1":298,"start2":298,"length1":18,"length2":16}]],"length":2295,"saved":false}
{"ts":1360606172606,"patch":[[{"diffs":[[0,"rder', function("],[-1,") {"],[1,"model, value, options) {\n        console.log(options)"],[0,"\n        this.sa"]],"start1":279,"start2":279,"length1":35,"length2":85}]],"length":2345,"saved":false}
{"ts":1360606176379,"patch":[[{"diffs":[[0,"ole.log("],[1,"value, "],[0,"options)"]],"start1":332,"start2":332,"length1":16,"length2":23}]],"length":2352,"saved":false}
{"ts":1360606231412,"patch":[[{"diffs":[[0,"ole.log("],[1,"model, "],[0,"value, o"]],"start1":332,"start2":332,"length1":16,"length2":23}]],"length":2359,"saved":false}
{"ts":1360606280048,"patch":[[{"diffs":[[0,"d({\n"],[-1,"    initialize: function() {\n        \n    this.on('change:attachments_order', function(model, value, options) {\n        console.log(model, value, options)\n        this.save(\"attachments_order\", { patch: true})\n    }, this)\n    },\n"],[0,"    "]],"start1":204,"start2":204,"length1":238,"length2":8},{"diffs":[[0,".model.s"],[1,"av"],[0,"e"],[-1,"t"],[0,"(\"attach"]],"start1":1336,"start2":1336,"length1":18,"length2":19},{"diffs":[[0,"oArray\")"],[1,", {patch: true}"],[0,");\n     "]],"start1":1388,"start2":1388,"length1":16,"length2":31}]],"length":2145,"saved":false}
{"ts":1360606643769,"patch":[[{"diffs":[[0,"    "],[-1,"this.$el.sortable({\n            update: function(event, ui) {\n                that.model.save(\"attachments_order\", $(this).sortable(\"toArray\"), {patch: true});\n            }\n        });"],[0,"\n   "]],"start1":1250,"start2":1250,"length1":193,"length2":8},{"diffs":[[0,"view\n        })\n"],[1,"        var element = rendered_view.render().$el\n        element.sortable({\n            update: function(event, ui) {\n                that.model.save(\"attachments_order\", $(this).sortable(\"toArray\"), {patch: true});\n            }\n        });\n"],[0,"        return r"]],"start1":1894,"start2":1894,"length1":32,"length2":274}]],"length":2202,"saved":false}
{"ts":1360606657745,"patch":[[{"diffs":[[0,"      th"],[-1,"at"],[1,"is"],[0,".model.s"]],"start1":2038,"start2":2038,"length1":18,"length2":18}]],"length":2202,"saved":false}
{"ts":1360606695890,"patch":[[{"diffs":[[0,"ion(view) {\n"],[1,"        var that = this;\n"],[0,"        var "]],"start1":1773,"start2":1773,"length1":24,"length2":49},{"diffs":[[0,"          th"],[-1,"is"],[1,"at"],[0,".model.save("]],"start1":2059,"start2":2059,"length1":26,"length2":26}]],"length":2227,"saved":false}
{"ts":1360607392810,"patch":[[{"diffs":[[0,"ender()."],[1,"$"],[0,"el\n    }"]],"start1":2207,"start2":2207,"length1":16,"length2":17}]],"length":2228,"saved":false}
{"ts":1360607411820,"patch":[[{"diffs":[[0,"ew.render()."],[-1,"$"],[0,"el\n    }\n})\n"]],"start1":2203,"start2":2203,"length1":25,"length2":24}]],"length":2227,"saved":false}
{"ts":1360607898377,"patch":[[{"diffs":[[0,"vent, ui) {\n"],[1,"                console.log(\"TRG\")\n"],[0,"            "]],"start1":2041,"start2":2041,"length1":24,"length2":59}]],"length":2262,"saved":false}
{"ts":1360608553715,"patch":[[{"diffs":[[0,"ortable("],[-1,"{"],[1,");"],[0,"\n       "]],"start1":2001,"start2":2001,"length1":17,"length2":18},{"diffs":[[0,"    "],[-1,"    "],[1,"element.bind(\"sort"],[0,"update"],[-1,":"],[1,"\","],[0," fun"]],"start1":2016,"start2":2016,"length1":19,"length2":34},{"diffs":[[0,"});\n            "],[-1,"}"],[0,"\n        });\n   "]],"start1":2198,"start2":2198,"length1":33,"length2":32},{"diffs":[[0,"     \n        })"],[-1,";"],[0,"\n        return "]],"start1":2209,"start2":2209,"length1":33,"length2":32}]],"length":2276,"saved":false}
{"ts":1360608621826,"patch":[[{"diffs":[[0,"log("],[-1,"\"TRG\""],[1,"$(this).sortable(\"toArray\")"],[0,")\n  "]],"start1":2093,"start2":2093,"length1":13,"length2":35}]],"length":2298,"saved":false}
{"contributors":[],"silentsave":false,"ts":1360609225215,"patch":[[{"diffs":[[0," },\n    "],[-1,""],[0,""],[1,"updateAttachmentsOrder: function(new_order) {\n        \n        \n    }\n    "],[0,"idAttrib"]],"start1":673,"start2":673,"length1":16,"length2":90},{"diffs":[[0,"on(model"],[1,") {"],[0,"\n       "]],"start1":991,"start2":991,"length1":16,"length2":19},{"diffs":[[0,"        "],[-1,") {"],[1,"var v = new this.options.view({\n            attributes: {\n                id: model.cid\n            },\n            model: model\n        });"],[0,"\n       "]],"start1":1003,"start2":1003,"length1":19,"length2":155},{"diffs":[[0,").el"],[-1,"\n        var v = \"Added attachment!\")  "],[1,")"],[0,"\n   "]],"start1":1231,"start2":1231,"length1":47,"length2":9},{"diffs":[[0,".model.g"],[-1,"av"],[0,"e"],[1,"t"],[0,"(\"attach"]],"start1":1341,"start2":1341,"length1":19,"length2":18},{"diffs":[[0,"ppend(new th"],[-1,"is"],[1,"at"],[0,".options.vie"]],"start1":1419,"start2":1419,"length1":26,"length2":26},{"diffs":[[0,"        id: "],[-1,"model.cid"],[1,"key"],[0,"\n           "]],"start1":1491,"start2":1491,"length1":33,"length2":27},{"diffs":[[0,") {\n"],[-1,"                console.log($(this).sortable(\"toArray\"))\n"],[0,"    "]],"start1":2139,"start2":2139,"length1":65,"length2":8},{"diffs":[[0,"del."],[-1,"save(\"a"],[1,"updateA"],[0,"ttac"]],"start1":2166,"start2":2166,"length1":15,"length2":15},{"diffs":[[0,"ents"],[-1,"_o"],[1,"O"],[0,"rder"],[-1,"\", "],[1,"("],[0,"$(th"]],"start1":2183,"start2":2183,"length1":17,"length2":14},{"diffs":[[0,"ay\")"],[-1,", {patch: true}"],[0,");\n "]],"start1":2216,"start2":2216,"length1":23,"length2":8}]],"length":2297,"saved":false}
{"ts":1360609241792,"patch":[[{"diffs":[[0,"rder) {\n        "],[1,"this.model.save({ attachments_order: new_order}, { patch: true})"],[0,"\n        \n    }\n"]],"start1":719,"start2":719,"length1":32,"length2":96}]],"length":2361,"saved":false}
{"ts":1360609265411,"patch":[[{"diffs":[[0,"      \n    }"],[1,","],[0,"\n    idAttri"]],"start1":802,"start2":802,"length1":24,"length2":25},{"diffs":[[0,"));\n"],[-1,"            \n"],[0,"    "]],"start1":2284,"start2":2284,"length1":21,"length2":8}]],"length":2349,"saved":false}
{"ts":1360609276300,"patch":[[{"diffs":[[0,"  this.m"],[-1,"odel."],[0,"save({ a"]],"start1":733,"start2":733,"length1":21,"length2":16}]],"length":2344,"saved":false}
{"ts":1360609278032,"patch":[[{"diffs":[[0,"   this."],[-1,"m"],[0,"save({ a"]],"start1":732,"start2":732,"length1":17,"length2":16}]],"length":2343,"saved":false}
{"ts":1360609347905,"patch":[[{"diffs":[[0,"ew_order) {\n"],[1,"        console.log(\"doing\")\n"],[0,"        this"]],"start1":715,"start2":715,"length1":24,"length2":53}]],"length":2372,"saved":false}
{"ts":1360609379557,"patch":[[{"diffs":[[0,"is.save("],[-1,"{ "],[1,"\""],[0,"attachme"]],"start1":766,"start2":766,"length1":18,"length2":17},{"diffs":[[0,"ts_order"],[-1,":"],[1,"\","],[0," new_ord"]],"start1":784,"start2":784,"length1":17,"length2":18},{"diffs":[[0,"ew_order"],[-1,"}"],[0,", { patc"]],"start1":796,"start2":796,"length1":17,"length2":16}]],"length":2371,"saved":false}
{"ts":1360609394284,"patch":[[{"diffs":[[0,"log("],[-1,"\"doing\""],[1,"new_order"],[0,")\n  "]],"start1":743,"start2":743,"length1":15,"length2":17}]],"length":2373,"saved":false}
{"ts":1360609412169,"patch":[[{"diffs":[[0,"rder"],[-1,", { patch: true}"],[0,")\n  "]],"start1":802,"start2":802,"length1":24,"length2":8}]],"length":2357,"saved":false}
{"ts":1360609478353,"patch":[[{"diffs":[[0,"ole.log("],[1,"this.get(\"attachments_order\"<"],[0,"new_orde"]],"start1":739,"start2":739,"length1":16,"length2":45}]],"length":2386,"saved":false}
{"ts":1360609480932,"patch":[[{"diffs":[[0,"der\""],[-1,"<"],[1,", "],[0,"new_"]],"start1":771,"start2":771,"length1":9,"length2":10}]],"length":2387,"saved":false}
{"ts":1360609520462,"patch":[[{"diffs":[[0,"der\", new_order)"],[1,")"],[0,"\n        this.sa"]],"start1":771,"start2":771,"length1":32,"length2":33}]],"length":2388,"saved":false}
{"ts":1360609544184,"patch":[[{"diffs":[[0,"ole.log("],[1,"\"Go\", "],[0,"this.get"]],"start1":739,"start2":739,"length1":16,"length2":22}]],"length":2394,"saved":false}
{"ts":1360609554487,"patch":[[{"diffs":[[0,"achments_order\","],[1," \"new\","],[0," new_order))\n   "]],"start1":766,"start2":766,"length1":32,"length2":39}]],"length":2401,"saved":false}
{"ts":1360609569680,"patch":[[{"diffs":[[0,"s_order\""],[1,")"],[0,", \"new\","]],"start1":773,"start2":773,"length1":16,"length2":17}]],"length":2402,"saved":false}
{"ts":1360609580488,"patch":[[{"diffs":[[0,"w_order)"],[-1,")"],[0,"\n       "]],"start1":793,"start2":793,"length1":17,"length2":16}]],"length":2401,"saved":false}
{"ts":1360609624256,"patch":[[{"diffs":[[0,"is.save("],[1,"{"],[0,"\"attachm"]],"start1":812,"start2":812,"length1":16,"length2":17},{"diffs":[[0,"s_order\""],[-1,","],[1,":"],[0," new_ord"]],"start1":832,"start2":832,"length1":17,"length2":17},{"diffs":[[0,"rder\": new_order"],[1,"}"],[0,")\n        \n    }"]],"start1":835,"start2":835,"length1":32,"length2":33}]],"length":2403,"saved":false}
{"ts":1360609650256,"patch":[[{"diffs":[[0,"r})\n        "],[1,"console.log(this)"],[0,"\n    },\n    "]],"start1":850,"start2":850,"length1":24,"length2":41}]],"length":2420,"saved":false}
{"ts":1360609754344,"patch":[[{"diffs":[[0,"order\": "],[-1,"new_order"],[1,"121212"],[0,"})\n     "]],"start1":834,"start2":834,"length1":25,"length2":22}]],"length":2417,"saved":false}
{"ts":1360609795860,"patch":[[{"diffs":[[0,"his."],[-1,"save"],[1,"destroy"],[0,"({\"a"]],"start1":811,"start2":811,"length1":12,"length2":15}]],"length":2420,"saved":false}
{"ts":1360609799777,"patch":[[{"diffs":[[0,"his."],[-1,"destroy({\"attachments_order\": 121212}"],[1,"save()"],[0,")\n  "]],"start1":811,"start2":811,"length1":45,"length2":14}]],"length":2389,"saved":false}
{"ts":1360609809993,"patch":[[{"diffs":[[0,"s.save()"],[-1,")"],[0,"\n       "]],"start1":813,"start2":813,"length1":17,"length2":16}]],"length":2388,"saved":false}
{"ts":1360609835668,"patch":[[{"diffs":[[0,"ray\"));\n        "],[-1,"})"],[1,"        that.model.save();\n        })\n        "],[0,"\n        return "]],"start1":2319,"start2":2319,"length1":34,"length2":78}]],"length":2432,"saved":false}
{"ts":1360609846206,"patch":[[{"diffs":[[0,") {\n"],[-1,"                that.model.updateAttachmentsOrder($(this).sortable(\"toArray\"));\n"],[0,"    "]],"start1":2243,"start2":2243,"length1":88,"length2":8}]],"length":2352,"saved":false}
{"ts":1360609903763,"patch":[[{"diffs":[[0,"t.model."],[-1,"save("],[1,"updateAttachmentsOrder($(this).sortable(\"toArray\")"],[0,");\n     "]],"start1":2266,"start2":2266,"length1":21,"length2":66}]],"length":2397,"saved":false}
{"ts":1360609959396,"patch":[[{"diffs":[[0," },\n"],[-1,"    updateAttachmentsOrder: function(new_order) {\n        console.log(\"Go\", this.get(\"attachments_order\"), \"new\", new_order)\n        this.save()\n        console.log(this)\n    },\n"],[0,"    "]],"start1":673,"start2":673,"length1":186,"length2":8}]],"length":2219,"saved":false}
{"ts":1360609969831,"patch":[[{"diffs":[[0,"esp;\n    },\n"],[1,"    updateAttachmentsOrder: function(new_order) {\n        console.log(\"Go\", this.get(\"attachments_order\"), \"new\", new_order)\n        this.save()\n        console.log(this)\n    },\n"],[0,"    idAttrib"]],"start1":665,"start2":665,"length1":24,"length2":202}]],"length":2397,"saved":false}
{"ts":1360609990591,"patch":[[{"diffs":[[0,"ew_order) {\n"],[1,"        this.set(\"attachments_order\", new_order)\n"],[0,"        cons"]],"start1":715,"start2":715,"length1":24,"length2":73}]],"length":2446,"saved":false}
{"ts":1360610056936,"patch":[[{"diffs":[[0,") {\n"],[-1,"        this.set(\"attachments_order\", new_order)\n"],[0,"    "]],"start1":723,"start2":723,"length1":57,"length2":8}]],"length":2397,"saved":false}
{"ts":1360610078245,"patch":[[{"diffs":[[0,"ew_order"],[1,", this.changedAttributes"],[0,")\n      "]],"start1":792,"start2":792,"length1":16,"length2":40}]],"length":2421,"saved":false}
{"ts":1360610095845,"patch":[[{"diffs":[[0,"tributes"],[1,"()"],[0,")\n      "]],"start1":816,"start2":816,"length1":16,"length2":18}]],"length":2423,"saved":false}
{"ts":1360610151574,"patch":[[{"diffs":[[0,"            "],[1,"//"],[0,"that.model.u"]],"start1":2277,"start2":2277,"length1":24,"length2":26}]],"length":2425,"saved":false}
{"ts":1360610161868,"patch":[[{"diffs":[[0,"        "],[-1,"//"],[0,"that.mod"]],"start1":2281,"start2":2281,"length1":18,"length2":16}]],"length":2423,"saved":false}
{"ts":1360612587488,"patch":[[{"diffs":[[0,"    "],[-1,"console.log(\"Go\", this.get(\"attachments_order\"), \"new\", new_order, this.changedAttributes())\n        this.save()\n        console.log(this"],[1,"this.save("],[0,")\n  "]],"start1":731,"start2":731,"length1":145,"length2":18}]],"length":2296,"saved":false}
{"ts":1360612603158,"patch":[[{"diffs":[[0,"is.save("],[1,"{attachments_order: new_order}, { patch: true}}"],[0,")\n    },"]],"start1":737,"start2":737,"length1":16,"length2":63}]],"length":2343,"saved":false}
{"ts":1360612608640,"patch":[[{"diffs":[[0,"h: true}"],[-1,"}"],[0,")\n    },"]],"start1":783,"start2":783,"length1":17,"length2":16}]],"length":2342,"saved":false}
{"ts":1360612795336,"patch":[[{"diffs":[[0,"ew_order) {\n"],[1,"        console.log(this.id)\n"],[0,"        this"]],"start1":715,"start2":715,"length1":24,"length2":53}]],"length":2371,"saved":false}
{"ts":1360612838803,"patch":[[{"diffs":[[0,"ch: true"],[1,", success: function() {\n            console.log(\"sucess\")\n        }, error: function() {\n            console.log(\"Error\")\n        }"],[0,"})\n    }"]],"start1":811,"start2":811,"length1":16,"length2":147}]],"length":2502,"saved":false}
{"ts":1360612859923,"patch":[[{"diffs":[[0,"s.save({"],[1,"\""],[0,"attachme"]],"start1":767,"start2":767,"length1":16,"length2":17},{"diffs":[[0,"ts_order"],[1,"\""],[0,": new_or"]],"start1":785,"start2":785,"length1":16,"length2":17}]],"length":2504,"saved":false}
{"ts":1360612872826,"patch":[[{"diffs":[[0,"    }})\n"],[1,"        console.log(\"DONE\")\n"],[0,"    },\n "]],"start1":947,"start2":947,"length1":16,"length2":44}]],"length":2532,"saved":false}
{"ts":1360612904051,"patch":[[{"diffs":[[0,"og(this."],[-1,"id"],[1,"get(\"attachments_order\"))\n        console.log(new_order"],[0,")\n      "]],"start1":744,"start2":744,"length1":18,"length2":71}]],"length":2585,"saved":false}
{"ts":1360613258015,"patch":[[{"diffs":[[0,"    "],[-1,"  console.log(this.get(\"attachments_order\"))\n        console.log(new_order)\n        this.save({\"attachments_order\": new_order}, { patch: true, success: function() {\n            console.log(\"sucess\")\n        }, error: function() {\n            console.log(\"Error\")\n        }})"],[0,"\n   "]],"start1":729,"start2":729,"length1":282,"length2":8}]],"length":2311,"saved":false}
{"ts":1360613271372,"patch":[[{"diffs":[[0,"er) {\n      "],[1,"  console.log(this.get(\"attachments_order\"))\n       "],[0,"\n        con"]],"start1":721,"start2":721,"length1":24,"length2":76}]],"length":2363,"saved":false}
{"ts":1360613295142,"patch":[[{"diffs":[[0,"og(\""],[-1,"DONE"],[1,"inside update method"],[0,"\")\n "]],"start1":803,"start2":803,"length1":12,"length2":28}]],"length":2379,"saved":false}
{"ts":1360613321823,"patch":[[{"diffs":[[0,"r\"))\n       "],[1,"this.save();"],[0,"\n        con"]],"start1":773,"start2":773,"length1":24,"length2":36}]],"length":2391,"saved":false}
{"ts":1360613342851,"patch":[[{"diffs":[[0,"is.save("],[1,"{attachments_order: new_order}"],[0,");\n     "]],"start1":787,"start2":787,"length1":16,"length2":46}]],"length":2421,"saved":false}
{"ts":1360613381716,"patch":[[{"diffs":[[0,"log("],[-1,"this.get(\"attachments"],[1,"new"],[0,"_order"],[-1,"\")"],[0,")\n  "]],"start1":743,"start2":743,"length1":37,"length2":17}]],"length":2401,"saved":false}
{"ts":1360613402948,"patch":[[{"diffs":[[0,"s.save({"],[1,"\""],[0,"attachme"]],"start1":768,"start2":768,"length1":16,"length2":17},{"diffs":[[0,"ts_order"],[1,"\""],[0,": new_or"]],"start1":786,"start2":786,"length1":16,"length2":17}]],"length":2403,"saved":false}
{"ts":1360613459624,"patch":[[{"diffs":[[0,"ole.log("],[-1,"new_order"],[1,"this.attributes"],[0,")\n      "]],"start1":739,"start2":739,"length1":25,"length2":31}]],"length":2409,"saved":false}
{"contributors":[],"silentsave":false,"ts":1360697883594,"patch":[[{"diffs":[[1,"Backbone.Model.Attachment = Backbone.Model.extend({})\n\nBackbone.Collection.Attachments = Backbone.Collection.extend({\n    model: Backbone.Model.Attachment\n})\n\nBackbone.Model.CouchDB = Backbone.Model.extend({\n    defaults: {\n        \"_attachments\": new Backbone.Collection.Attachments,\n        \"attachments_order\": []\n    },\n    parse: function(resp) {\n        var parsed_attachments = _.map(resp._attachments, function(value, key, list) {\n            return {\n                id: key,\n                content_type: list[key].content_type,\n                length: list[key].length,\n            }\n        }, this)\n        if (this.get(\"_attachments\") instanceof Backbone.Collection.Attachments) {\n            resp._attachments = this.get(\"_attachments\").reset(parsed_attachments)\n        }\n        else {\n            resp._attachments = new Backbone.Collection.Attachments(parsed_attachments)\n        }\n        resp._attachments.url = this.url() + \"/attachments\"\n        return resp;\n    },\n    updateAttachmentsOrder: function(new_order) {\n        this.save({\n            \"attachments_order\": new_order\n        }, {\n            patch: true\n        });\n    },\n    idAttribute: \"_id\"\n});\n\n// VIEW \n// Attachments\n\nBackbone.View.Attachments = Backbone.View.extend({\n    initialize: function() {\n        this.model.get(\"_attachments\").on(\"add\", this.addAttachment, this)\n    },\n    // addAttachment is called whenever the addAttachment() method from the \n    // parent view class (below) is called. \n    addAttachment: function(model) {\n        var v = new this.options.view({\n            attributes: {\n                id: model.cid\n            },\n            model: model\n        });\n        v.listenTo(model, 'destroy', v.remove)\n        this.$el.append(v.render().el)\n    },\n    render: function() {\n        var that = this;\n        this.$el.empty();\n\n        this.model.get(\"attachments_order\").forEach(function(key) {\n            var subview = new that.options.view({\n                attributes: {\n                    id: key\n                },\n                model: that.model.get(\"_attachments\").get(key)\n            }).render().$el\n            \n            subview.$el.append(\"text after\")\n            that.$el.append(subview.el);\n        })\n        return this;\n    }\n})\n\n// VIEW \n// CouchDB Model\n//\n\n\nBackbone.View.CouchDB = Backbone.View.extend({\n    // \n    addAttachment: function() {\n        this.model.get(\"_attachments\").add({})\n    },\n    \n    // Extend this view and then call buildAttachments(view) from within the \n    // extended view's render() method, passing it an extended Backbone view\n    // to render each individual attachment. b\n    buildAttachments: function(view) {\n        var that = this;\n        var rendered_view = new Backbone.View.Attachments({\n            model: this.model,\n            view: view\n        })\n        var element = rendered_view.render().$el\n        element.sortable({\n            update: function(event, ui) {\n                that.model.updateAttachmentsOrder($(this).sortable(\"toArray\"));\n            }\n        })\n\n        return rendered_view.render().el\n    }\n})\n"]],"start1":0,"start2":0,"length1":0,"length2":3119}]],"length":3119,"saved":false}
{"ts":1360697898824,"patch":[[{"diffs":[[0,"     }).render()"],[-1,".$el"],[0,"\n            \n  "]],"start1":2115,"start2":2115,"length1":36,"length2":32}]],"length":3115,"saved":false}
{"ts":1360698036325,"patch":[[{"diffs":[[0,"d\"\n});\n\n"],[1,"\nfunction makeDroppable(el) {\n            // We need this to prevent the browser using its standard default when you drag over\n                el.addEventListener('dragover', function(e) {\n                    e.preventDefault();\n                });\n\n                el.addEventListener('drop', function(e) {\n                    e.preventDefault();\n\n                    $.each(e.dataTransfer.files, function() {\n                        var file = this;\n                        console.log(file)\n                    });\n                });\n    \n}\n"],[0,"// VIEW "]],"start1":1178,"start2":1178,"length1":16,"length2":561},{"diffs":[[0,"    "],[-1,"\n            "],[1,"makeDroppable("],[0,"subview."],[-1,"$"],[0,"el"],[-1,".append(\"text after\""],[0,")\n  "]],"start1":2685,"start2":2685,"length1":52,"length2":32}]],"length":3640,"saved":false}
{"ts":1360698039093,"patch":[[{"diffs":[[0,"pable(el) {\n"],[-1,"        "],[0,"    // We ne"]],"start1":1204,"start2":1204,"length1":32,"length2":24},{"diffs":[[0,"ag over\n"],[-1,"            "],[0,"    el.a"]],"start1":1297,"start2":1297,"length1":28,"length2":16},{"diffs":[[0,"nction(e) {\n"],[-1,"            "],[0,"        e.pr"]],"start1":1343,"start2":1343,"length1":36,"length2":24},{"diffs":[[0,"    "],[-1,"            });\n\n            "],[1,"});\n\n"],[0,"    "]],"start1":1383,"start2":1383,"length1":37,"length2":13},{"diffs":[[0,"nction(e) {\n"],[-1,"            "],[0,"        e.pr"]],"start1":1426,"start2":1426,"length1":36,"length2":24},{"diffs":[[0,"ult();\n\n"],[-1,"            "],[0,"        "]],"start1":1459,"start2":1459,"length1":28,"length2":16},{"diffs":[[0,"        "],[-1,"   "],[-1,"         "],[0,"var file"]],"start1":1521,"start2":1521,"length1":28,"length2":16},{"diffs":[[0,"        "],[-1,"       "],[-1,"     "],[0,"console."]],"start1":1550,"start2":1550,"length1":28,"length2":16},{"diffs":[[0,"g(file)\n"],[-1,"            "],[0,"        "]],"start1":1568,"start2":1568,"length1":28,"length2":16},{"diffs":[[0,"    "],[-1,"            });\n    "],[1,"});\n"],[0,"\n}\n/"]],"start1":1588,"start2":1588,"length1":28,"length2":12},{"diffs":[[0,"\n    },\n"],[-1,"    "],[0,"\n    // "]],"start1":2830,"start2":2830,"length1":20,"length2":16}]],"length":3504,"saved":false}
{"ts":1360698856001,"patch":[[{"diffs":[[0,"    "],[-1,"console.log"],[1,"var reader = new FileReader();\n            reader.onload = function() {\n                $('<img>').attr('title', file.name).attr('src', this.result).appendTo(el);\n            };\n            reader.readAsDataURL"],[0,"(file)"],[1,";"],[0,"\n   "]],"start1":1554,"start2":1554,"length1":25,"length2":225}]],"length":3704,"saved":false}
{"ts":1360698873819,"patch":[[{"diffs":[[0,"result)."],[1,"css('width', '50px')."],[0,"appendTo"]],"start1":1699,"start2":1699,"length1":16,"length2":37}]],"length":3725,"saved":false}
{"ts":1360699940502,"patch":[[{"diffs":[[0,"    "],[-1," $.each(e.dataTransfer.files, function() {\n            var file = this"],[1,"\n            var file =  e.dataTransfer.files[0]"],[0,";\n  "]],"start1":1470,"start2":1470,"length1":78,"length2":56}]],"length":3703,"saved":false}
{"ts":1360699950694,"patch":[[{"diffs":[[0,"e);\n        "],[-1,"});"],[0,"\n    });\n\n}\n"]],"start1":1771,"start2":1771,"length1":27,"length2":24}]],"length":3700,"saved":false}
{"ts":1360699996754,"patch":[[{"diffs":[[0," = function() {\n"],[1,"                $('img').remove()\n"],[0,"                "]],"start1":1592,"start2":1592,"length1":32,"length2":66}]],"length":3734,"saved":false}
{"ts":1360700901387,"patch":[[{"diffs":[[0,"            "],[1," console.log(this.result)\n               //"],[0," $('img').re"]],"start1":1611,"start2":1611,"length1":24,"length2":67},{"diffs":[[0,"        "],[1,"//"],[0,"$('<img>"]],"start1":1693,"start2":1693,"length1":16,"length2":18},{"diffs":[[0,"adAs"],[-1,"DataURL"],[1,"BinaryString"],[0,"(fil"]],"start1":1835,"start2":1835,"length1":15,"length2":20}]],"length":3784,"saved":false}
{"ts":1360703796376,"patch":[[{"diffs":[[0,"bview.el"],[1,", that.model.get(\"_attachments\").get(key)"],[0,")\n      "]],"start1":2853,"start2":2853,"length1":16,"length2":57}]],"length":3825,"saved":false}
{"ts":1360703893860,"patch":[[{"diffs":[[0,"pable(el"],[1,",model"],[0,") {\n    "]],"start1":1204,"start2":1204,"length1":16,"length2":22},{"diffs":[[0,"yString("],[-1,"file"],[1,"model"],[0,");\n     "]],"start1":1850,"start2":1850,"length1":20,"length2":21}]],"length":3832,"saved":false}
{"ts":1360703910193,"patch":[[{"diffs":[[0,"ole.log("],[-1,"this.result"],[1,"model"],[0,")\n      "]],"start1":1634,"start2":1634,"length1":27,"length2":21},{"diffs":[[0,"yString("],[-1,"model"],[1,"file"],[0,");\n     "]],"start1":1844,"start2":1844,"length1":21,"length2":20}]],"length":3825,"saved":false}
{"ts":1360703951417,"patch":[[{"diffs":[[0," = function() {\n"],[1,"                model.set(\"binary\", this.result);\n"],[0,"                "]],"start1":1598,"start2":1598,"length1":32,"length2":82},{"diffs":[[0,"og(model"],[1,".attributes"],[0,")\n      "]],"start1":1689,"start2":1689,"length1":16,"length2":27}]],"length":3886,"saved":false}
{"ts":1360703954994,"patch":[[{"diffs":[[0,"tributes"],[1,"()"],[0,")\n      "]],"start1":1700,"start2":1700,"length1":16,"length2":18}]],"length":3888,"saved":false}
{"ts":1360703963846,"patch":[[{"diffs":[[0,"utes"],[-1,"())"],[0,"\n   "]],"start1":1704,"start2":1704,"length1":11,"length2":8}]],"length":3885,"saved":false}
{"ts":1360703965543,"patch":[[{"diffs":[[0,"tributes"],[1,")"],[0,"\n       "]],"start1":1700,"start2":1700,"length1":16,"length2":17}]],"length":3886,"saved":false}
{"ts":1360703979384,"patch":[[{"diffs":[[0,"    "],[-1,"console.log(model.attributes)"],[1,"model.save();"],[0,"\n   "]],"start1":1676,"start2":1676,"length1":37,"length2":21}]],"length":3870,"saved":false}
{"contributors":[],"silentsave":false,"ts":1360706892134,"patch":[[{"diffs":[[0,"adAs"],[-1,"BinaryString"],[1,"DataURL"],[0,"(fil"]],"start1":1880,"start2":1880,"length1":20,"length2":15},{"diffs":[[0,"\n})\n"],[-1,"Backbone.Model.Attachment = Backbone.Model.extend({})\n\nBackbone.Collection.Attachments = Backbone.Collection.extend({\n    model: Backbone.Model.Attachment\n})\n\nBackbone.Model.CouchDB = Backbone.Model.extend({\n    parse: function(resp, options) {\n        var parsed_attachments = _.map(resp._attachments, function(value, key, list) {\n            return {\n                id: key,\n                content_type: list[key].content_type,\n                length: list[key].length,\n            }\n        }, this)\n        resp._attachments = new Backbone.Collection.Attachments(parsed_attachments)\n        resp._attachments.url = this.url() + \"/attachments\"\n        return resp;\n    },\n    updateAttachmentsOrder: function(new_order) {\n        console.log(this.attributes)\n       this.save({\"attachments_order\": new_order});\n        console.log(\"inside update method\")\n    },\n    idAttribute: \"_id\"\n});\n\n// VIEW \n// Attachments\n\nBackbone.View.Attachments = Backbone.View.extend({\n    initialize: function() {\n        this.model.get(\"_attachments\").on(\"add\", this.addAttachment, this)\n    },\n    addAttachment: function(model) {\n        var v = new this.options.view({\n            attributes: {\n                id: model.cid\n            },\n            model: model\n        });\n        v.listenTo(model, 'destroy', v.remove)\n        this.$el.append(v.render().el)\n    },\n    render: function() {\n        var that = this;\n        this.$el.empty();\n        \n        this.model.get(\"attachments_order\").forEach(function(key) {\n            that.$el.append(new that.options.view({\n                attributes: {\n                    id: key\n                },\n                model: that.model.get(\"_attachments\").get(key)\n            }).render().el);\n        })\n        return this;\n    }\n})\n\n// VIEW \n// CouchDB Model\n\nBackbone.View.CouchDB = Backbone.View.extend({\n    addAttachment: function() {\n        this.model.get(\"_attachments\").add({})\n    },\n    buildAttachments: function(view) {\n        var that = this;\n        var rendered_view = new Backbone.View.Attachments({\n            model: this.model,\n            view: view\n        })\n        var element = rendered_view.render().$el\n        element.sortable();\n        element.bind(\"sortupdate\", function(event, ui) {\n                that.model.updateAttachmentsOrder($(this).sortable(\"toArray\"));\n        })\n        \n        return rendered_view.render().el\n    }\n})\n"]],"start1":3861,"start2":3861,"length1":2413,"length2":4}]],"length":3865,"saved":false}
{"contributors":[],"silentsave":false,"ts":1360758850080,"patch":[[{"diffs":[[0,"ion(resp) {\n"],[1,"        var result = {};\n        _.each(resp._attachments, function(value, key, list) {\n            var type_number = key.split(\"-\");\n            var number = type_number[1];\n            var type = type_number[0];\n            result[number] = {}\n            result[number][type][\"content_type\"] = list[key].content_type,\n            result[number][type][\"length\"] list[key].length;\n        })\n        console.log(result)\n"],[0,"        var "]],"start1":340,"start2":340,"length1":24,"length2":445}]],"length":4286,"saved":false}
{"ts":1360758884703,"patch":[[{"diffs":[[0,"length\"]"],[1," ="],[0," list[ke"]],"start1":707,"start2":707,"length1":16,"length2":18}]],"length":4288,"saved":false}
{"ts":1360758888426,"patch":[[{"diffs":[[0,"ey].content_type"],[-1,","],[1,";"],[0,"\n            res"]],"start1":655,"start2":655,"length1":33,"length2":33}]],"length":4288,"saved":false}
{"ts":1360758908625,"patch":[[{"diffs":[[0,"r] = {}\n"],[1,"            result[number][type] = {}\n"],[0,"        "]],"start1":590,"start2":590,"length1":16,"length2":54}]],"length":4326,"saved":false}
{"ts":1360758956422,"patch":[[{"diffs":[[0,"umber] ="],[1," result[number] ||"],[0," {}\n    "]],"start1":586,"start2":586,"length1":16,"length2":34}]],"length":4344,"saved":false}
{"ts":1360758998528,"patch":[[{"diffs":[[0,"ype] = {"],[-1,"}"],[0,"\n       "]],"start1":644,"start2":644,"length1":17,"length2":16},{"diffs":[[0,"        "],[-1,"result[number][type][\""],[1,"    "],[0,"content_"]],"start1":657,"start2":657,"length1":38,"length2":20},{"diffs":[[0,"ent_type"],[-1,"\"] ="],[1,":"],[0," list[ke"]],"start1":673,"start2":673,"length1":20,"length2":17},{"diffs":[[0,"ent_type"],[-1,";"],[1,","],[0,"\n       "]],"start1":697,"start2":697,"length1":17,"length2":17},{"diffs":[[0,"    "],[-1,"result[number][type][\""],[1,"    "],[0,"length"],[-1,"\"]"],[1,":"],[0," = l"]],"start1":715,"start2":715,"length1":38,"length2":19},{"diffs":[[0,"].length"],[-1,";"],[1,"\n            }"],[0,"\n       "]],"start1":741,"start2":741,"length1":17,"length2":30}]],"length":4316,"saved":false}
{"ts":1360759011074,"patch":[[{"diffs":[[0," length:"],[-1," ="],[0," list[ke"]],"start1":722,"start2":722,"length1":18,"length2":16}]],"length":4314,"saved":false}
{"contributors":[],"silentsave":false,"ts":1361220508982,"patch":[[{"diffs":[[0,"        "],[-1,"//"],[0," $('img'"]],"start1":2150,"start2":2150,"length1":18,"length2":16},{"diffs":[[0,"        "],[-1,"    //"],[0,"$('<img>"]],"start1":2181,"start2":2181,"length1":22,"length2":16}]],"length":4306,"saved":false}
{"ts":1361221808731,"patch":[[{"diffs":[[0," = function() {\n"],[1,"                console.log(this.result)\n"],[0,"                "]],"start1":2047,"start2":2047,"length1":32,"length2":73}]],"length":4347,"saved":false}
{"ts":1361222120381,"patch":[[{"diffs":[[0,"log(this"],[-1,".result"],[0,")\n      "]],"start1":2087,"start2":2087,"length1":23,"length2":16}]],"length":4340,"saved":false}
{"ts":1361222146488,"patch":[[{"diffs":[[0,"0];\n"],[-1,"            var reader = new FileReader();\n"],[0,"    "]],"start1":1975,"start2":1975,"length1":51,"length2":8},{"diffs":[[0,"inary\", "],[-1,"this.result"],[1,"file"],[0,");\n     "]],"start1":2082,"start2":2082,"length1":27,"length2":20}]],"length":4290,"saved":false}
{"ts":1361222494239,"patch":[[{"diffs":[[0,"extend({"],[1,"\n    sync: function(method, model, options) {\n        if(method === \"PUT\" || method === \"POST\") {\n            \n        } else {\n            return Backbone.prototype.sync.call(this, method, method, options);\n        }\n    }"],[0,"})\n\nBack"]],"start1":43,"start2":43,"length1":16,"length2":239},{"diffs":[[0,"tDefault();\n"],[-1,"\n"],[0,"       \n    "]],"start1":2132,"start2":2132,"length1":25,"length2":24}]],"length":4512,"saved":false}
{"ts":1361222500240,"patch":[[{"diffs":[[0,"ethod, m"],[-1,"eth"],[0,"od"],[1,"el"],[0,", option"]],"start1":234,"start2":234,"length1":21,"length2":20}]],"length":4511,"saved":false}
{"ts":1361222508598,"patch":[[{"diffs":[[0,"            "],[1,"console.log(method)"],[0,"\n        } e"]],"start1":149,"start2":149,"length1":24,"length2":43}]],"length":4530,"saved":false}
{"ts":1361222535129,"patch":[[{"diffs":[[0,"      if"],[1," "],[0,"(method "]],"start1":99,"start2":99,"length1":16,"length2":17},{"diffs":[[0,"       }"],[1,"\n       "],[0," else {\n"]],"start1":183,"start2":183,"length1":16,"length2":24},{"diffs":[[0," }\n    }"],[1,"\n"],[0,"})\n\nBack"]],"start1":293,"start2":293,"length1":16,"length2":17},{"diffs":[[0,"able(el,"],[1," "],[0,"model) {"]],"start1":1905,"start2":1905,"length1":16,"length2":17},{"diffs":[[0,"l, model) {\n"],[-1,""],[0,"    // We ne"]],"start1":1911,"start2":1911,"length1":24,"length2":24},{"diffs":[[0,"();\n"],[-1,"       \n "],[1,"\n"],[0,"        "],[-1,"   "],[0,"var "]],"start1":2169,"start2":2169,"length1":28,"length2":17},{"diffs":[[0,"r file ="],[-1," "],[0," e.dataT"]],"start1":2184,"start2":2184,"length1":17,"length2":16},{"diffs":[[0,"r.files[0];\n"],[-1,"    "],[0,"        read"]],"start1":2206,"start2":2206,"length1":28,"length2":24},{"diffs":[[0,") {\n            "],[-1,"    "],[0,"console.log(this"]],"start1":2251,"start2":2251,"length1":36,"length2":32},{"diffs":[[0,"e.log(this)\n"],[-1,"    "],[0,"            "]],"start1":2273,"start2":2273,"length1":28,"length2":24},{"diffs":[[0,"            "],[-1,"    "],[0,"model.save()"]],"start1":2324,"start2":2324,"length1":28,"length2":24},{"diffs":[[0,"save();\n"],[-1,"    "],[0,"        "]],"start1":2342,"start2":2342,"length1":20,"length2":16},{"diffs":[[0,"    "],[-1,"    };\n    "],[1,"};\n"],[0,"    "]],"start1":2492,"start2":2492,"length1":19,"length2":11},{"diffs":[[0,"(file);\n"],[-1,"        "],[0,"\n    });"]],"start1":2527,"start2":2527,"length1":24,"length2":16}]],"length":4493,"saved":false}
{"ts":1361222583072,"patch":[[{"diffs":[[0,"    "],[-1,"reader.onload = function() {\n            console.log(this)"],[1,"    "],[0,"\n   "]],"start1":2222,"start2":2222,"length1":66,"length2":12},{"diffs":[[0,"    "],[-1,"};"],[0,"\n     "],[-1,"   reader.readAsDataURL(file);"],[0,"\n\n  "]],"start1":2438,"start2":2438,"length1":46,"length2":14}]],"length":4407,"saved":false}
{"ts":1361222598457,"patch":[[{"diffs":[[0,"one."],[-1,"prototype."],[0,"sync"]],"start1":231,"start2":231,"length1":18,"length2":8}]],"length":4397,"saved":false}
{"ts":1361222663477,"patch":[[{"diffs":[[0," options) {\n"],[1,"        console.log(method)\n"],[0,"        if ("]],"start1":85,"start2":85,"length1":24,"length2":52}]],"length":4425,"saved":false}
{"ts":1361222676295,"patch":[[{"diffs":[[0,"== \""],[-1,"PUT\" || method === \"POST"],[1,"update"],[0,"\") {"]],"start1":145,"start2":145,"length1":32,"length2":14}]],"length":4407,"saved":false}
{"ts":1361222679403,"patch":[[{"diffs":[[0,"        "],[-1," console.log(method)"],[0,"\n       "]],"start1":163,"start2":163,"length1":36,"length2":16}]],"length":4387,"saved":false}
{"ts":1361222715793,"patch":[[{"diffs":[[0,"\") {\n           "],[1,"console.log(this.get(\"binary\"))"],[0,"\n        }\n     "]],"start1":155,"start2":155,"length1":32,"length2":63}]],"length":4418,"saved":false}
{"ts":1361222735596,"patch":[[{"diffs":[[0,"nary\"))\n"],[1,"           $.ajax({\n                       url: '/attachment',\n                       type: \"POST\",\n                       data: file,\n                       contentType: \"image/jpeg\",\n                       processData: false,\n                       success: function(response) {\n                           console.log(response)\n                       }\n                   })\n"],[0,"        "]],"start1":195,"start2":195,"length1":16,"length2":393}]],"length":4795,"saved":false}
{"ts":1361222741159,"patch":[[{"diffs":[[0,"  data: "],[-1,"file"],[1,"this.binary"],[0,",\n      "]],"start1":324,"start2":324,"length1":20,"length2":27}]],"length":4802,"saved":false}
{"ts":1361222792985,"patch":[[{"diffs":[[0," url: '/"],[1,"product/s"],[0,"attachme"]],"start1":245,"start2":245,"length1":16,"length2":25},{"diffs":[[0,"tachment"],[1,"s/121"],[0,"',\n     "]],"start1":264,"start2":264,"length1":16,"length2":21}]],"length":4816,"saved":false}
{"ts":1361222797390,"patch":[[{"diffs":[[0,": \"P"],[-1,"OS"],[1,"U"],[0,"T\",\n"]],"start1":307,"start2":307,"length1":10,"length2":9}]],"length":4815,"saved":false}
{"ts":1361222810918,"patch":[[{"diffs":[[0,"product/"],[-1,"s"],[0,"attachme"]],"start1":253,"start2":253,"length1":17,"length2":16}]],"length":4814,"saved":false}
{"ts":1361222826104,"patch":[[{"diffs":[[0,"/product"],[1,"s"],[0,"/attachm"]],"start1":252,"start2":252,"length1":16,"length2":17}]],"length":4815,"saved":false}
{"ts":1361222919002,"patch":[[{"diffs":[[0,"= e."],[-1,"dataTransfer."],[0,"file"]],"start1":2599,"start2":2599,"length1":21,"length2":8}]],"length":4802,"saved":false}
{"ts":1361222933921,"patch":[[{"diffs":[[0,"= e."],[-1,"files[0]"],[0,";\n  "]],"start1":2599,"start2":2599,"length1":16,"length2":8}]],"length":4794,"saved":false}
{"ts":1361222935807,"patch":[[{"diffs":[[0,"file = e"],[-1,"."],[0,";\n      "]],"start1":2594,"start2":2594,"length1":17,"length2":16}]],"length":4793,"saved":false}
{"ts":1361222951222,"patch":[[{"diffs":[[0,"file = e"],[1,"l.files[0]"],[0,";\n      "]],"start1":2594,"start2":2594,"length1":16,"length2":26}]],"length":4803,"saved":false}
{"ts":1361222961863,"patch":[[{"diffs":[[0,"tDefault();\n"],[1,"        console.log(el)"],[0,"\n        var"]],"start1":2569,"start2":2569,"length1":24,"length2":47}]],"length":4826,"saved":false}
{"contributors":[],"silentsave":false,"ts":1361222992441,"patch":[[{"diffs":[[0,"le = el."],[1,"dataTransfer."],[0,"files[0]"]],"start1":2619,"start2":2619,"length1":16,"length2":29}]],"length":4839,"saved":false}
{"ts":1361223009405,"patch":[[{"diffs":[[0,"();\n"],[-1,"        console.log(el)\n"],[0,"    "]],"start1":2577,"start2":2577,"length1":32,"length2":8},{"diffs":[[0,"file = e"],[-1,"l"],[0,".dataTra"]],"start1":2593,"start2":2593,"length1":17,"length2":16}]],"length":4814,"saved":false}
{"ts":1361223754316,"patch":[[{"diffs":[[0,"a: this."],[1,"get(\""],[0,"binary"],[1,"\")"],[0,",\n      "]],"start1":342,"start2":342,"length1":22,"length2":29}]],"length":4821,"saved":false}
{"contributors":[],"silentsave":false,"ts":1361225130094,"patch":[[{"diffs":[[0,"del.extend({"],[1,"\n\n    // Overwrite the Backbone.sync method for CREATE and UPDATE calls\n    // as we want to send just the binary data of the attachment\n    // We shouldn't concern ourselves with GETting the attachment as \n    // attachments should always be created via the parent collection"],[0,"\n    sync: f"]],"start1":39,"start2":39,"length1":24,"length2":300},{"diffs":[[0,"ole.log("],[-1,"method"],[1,"this.url(), this.url"],[0,")\n      "]],"start1":385,"start2":385,"length1":22,"length2":36},{"diffs":[[0," {\n "],[-1,"          console.log(this.get(\"binary\"))\n"],[0,"    "]],"start1":447,"start2":447,"length1":50,"length2":8},{"diffs":[[0,"        "],[-1,"  "],[-1,"     "],[0,"url: '/p"]],"start1":479,"start2":479,"length1":23,"length2":16},{"diffs":[[0,"        "],[-1,"       "],[0,"type: \"P"]],"start1":529,"start2":529,"length1":23,"length2":16},{"diffs":[[0,"        "],[-1,"    "],[-1,"   "],[0,"data: th"]],"start1":558,"start2":558,"length1":23,"length2":16},{"diffs":[[0,"nary\"),\n"],[-1,"       "],[0,"        "]],"start1":584,"start2":584,"length1":23,"length2":16},{"diffs":[[0,"        "],[-1,"     "],[-1,"  "],[0,"processD"]],"start1":643,"start2":643,"length1":23,"length2":16},{"diffs":[[0," false,\n"],[-1,"       "],[0,"        "]],"start1":663,"start2":663,"length1":23,"length2":16},{"diffs":[[0,"response) {\n"],[-1,"       "],[0,"            "]],"start1":705,"start2":705,"length1":31,"length2":24},{"diffs":[[0,"            "],[-1,"       "],[0,"}\n          "]],"start1":763,"start2":763,"length1":31,"length2":24},{"diffs":[[0,"    "],[-1," "],[-1,"      })\n        }\n        else {\n            return Backbone.sync.call(this, method, model, options);"],[1,"})"],[0,"\n   "]],"start1":785,"start2":785,"length1":111,"length2":10},{"diffs":[[0," })\n"],[-1,"        console.log(result)\n"],[0,"    "]],"start1":1526,"start2":1526,"length1":36,"length2":8},{"diffs":[[0,".url() +"],[-1,""],[0,""],[1,"\"/\" + resp._id +"],[0," \"/attac"]],"start1":2115,"start2":2115,"length1":16,"length2":32},{"diffs":[[0,");\n    });\n\n"],[1,"    // Listen for a file to be dropped on the element\n    // and then get the file, set the binary data of the attachment\n    // and save it\n"],[0,"    el.addEv"]],"start1":2581,"start2":2581,"length1":24,"length2":165},{"diffs":[[0,"0];\n"],[-1,"            \n    "],[1,"\n"],[0,"    "]],"start1":2848,"start2":2848,"length1":25,"length2":9},{"diffs":[[0,"e);\n        "],[-1,"    "],[0,"model.save()"]],"start1":2884,"start2":2884,"length1":28,"length2":24},{"diffs":[[0,"        "],[-1," "],[-1,"   "],[0,"$('img')"]],"start1":2910,"start2":2910,"length1":20,"length2":16},{"diffs":[[0,"emove()\n"],[-1,"    "],[0,"        "]],"start1":2928,"start2":2928,"length1":20,"length2":16},{"diffs":[[0,"l);\n"],[-1,"        \n     \n\n"],[0,"    });\n"],[-1,"\n"],[0,"}\n//"]],"start1":3036,"start2":3036,"length1":33,"length2":16},{"diffs":[[0,");\n}\n// VIEW"],[-1,""],[0,""],[1,"S"],[0," \n// Attachm"]],"start1":3045,"start2":3045,"length1":24,"length2":25},{"diffs":[[0,"del\n//\n\n"],[-1,"\n"],[0,"Backbone"]],"start1":4181,"start2":4181,"length1":17,"length2":16},{"diffs":[[0,"chment. "],[-1,"b"],[0,""],[1,""],[0,"\n    bui"]],"start1":4523,"start2":4523,"length1":17,"length2":16}]],"length":4995,"saved":false}
{"contributors":[],"silentsave":false,"ts":1361227026155,"patch":[[{"diffs":[[0,"rl: "],[-1,"'/products/attachments/121'"],[1,"this.url()"],[0,",\n  "]],"start1":488,"start2":488,"length1":35,"length2":18},{"diffs":[[0,"pe: "],[-1,"\"image/jpeg\""],[1,"this.get(\"content_type\")"],[0,",\n  "]],"start1":600,"start2":600,"length1":20,"length2":32}]],"length":4990,"saved":false}
{"ts":1361227198109,"patch":[[{"diffs":[[0,"his."],[-1,"url(), this.url"],[1,"get(\"content_type\")"],[0,")\n  "]],"start1":394,"start2":394,"length1":23,"length2":27}]],"length":4994,"saved":false}
{"contributors":[],"silentsave":false,"ts":1361271273932,"patch":[[{"diffs":[[0,"    "],[-1,"console.log(this.get(\"content_type\"))\n        if (method === \"update\") {\n            $.ajax({\n                url:"],[1,"options.processData = false; \n        options.data = this.get(\"binary\");\n        options.url ="],[0," thi"]],"start1":377,"start2":377,"length1":122,"length2":102},{"diffs":[[0,"is.url()"],[-1,","],[1,";"],[0,"\n       "]],"start1":478,"start2":478,"length1":17,"length2":17},{"diffs":[[0,"    "],[-1,"        "],[1,"options."],[0,"type"],[-1,":"],[1," ="],[0," \"PUT\""],[-1,","],[1,";"],[0,"\n   "]],"start1":492,"start2":492,"length1":28,"length2":29},{"diffs":[[0,"    "],[-1,"        data: this.get(\"binary\"),\n        "],[1,"options.contentType = this.get(\"content_type\");\n"],[0,"    "]],"start1":522,"start2":522,"length1":50,"length2":56},{"diffs":[[0," con"],[-1,"tentType: "],[1,"sole.log("],[0,"this"]],"start1":581,"start2":581,"length1":18,"length2":17},{"diffs":[[0,"t_type\")"],[-1,","],[1,")"],[0,"\n       "]],"start1":610,"start2":610,"length1":17,"length2":17},{"diffs":[[0,"    "],[-1,"        processData: false,\n                success: function(response) {\n                    console.log(response)\n                }\n            })"],[1,"if (method === \"update\") {\n            $.ajax(options);"],[0,"\n   "]],"start1":624,"start2":624,"length1":156,"length2":63}]],"length":4887,"saved":false}
{"ts":1361271316272,"patch":[[{"diffs":[[0,"lection\n"],[1,"    //\n    // options is created by the Backbone.Model.save() method and \n    // it contains the success callback for the low-level jQuery $.ajax\n    // method\n"],[0,"    sync"]],"start1":320,"start2":320,"length1":16,"length2":176}]],"length":5047,"saved":false}
{"ts":1361271837370,"patch":[[{"diffs":[[0,"/ method"],[1,". We augment it with our own options."],[0,"\n    syn"]],"start1":479,"start2":479,"length1":16,"length2":53}]],"length":5084,"saved":false}
{"ts":1361272828365,"patch":[[{"diffs":[[0,"    "],[-1,"console.log(this.get(\"content_type\"))"],[1,"var success = options.success;\n        options.success = function(resp) {\n            if(success) success(model,resp,options);\n            model.trigger('sync',model.resp,options);\n        }\n        "],[0,"\n   "]],"start1":775,"start2":775,"length1":45,"length2":207}]],"length":5246,"saved":false}
{"ts":1361282561264,"patch":[[{"diffs":[[0,"xtend({\n"],[1,"    url: function() {\n        return this.collection.url + \"/\" + this.id + \"/\" + this.rev;\n    }"],[0,"\n    // "]],"start1":44,"start2":44,"length1":16,"length2":112}]],"length":5342,"saved":false}
{"ts":1361282565635,"patch":[[{"diffs":[[0,"s.rev;\n    }"],[1,","],[0,"\n    // Over"]],"start1":136,"start2":136,"length1":24,"length2":25}]],"length":5343,"saved":false}
{"ts":1361287324217,"patch":[[{"diffs":[[0," });\n    },\n"],[1,"    sync: function(method, model, options) {\n        \n    },\n"],[0,"    idAttrib"]],"start1":2688,"start2":2688,"length1":24,"length2":85}]],"length":5404,"saved":false}
{"ts":1361287513167,"patch":[[{"diffs":[[0,") {\n        "],[1,"  var form = new FormData();\n          this.get(\"_attachments\").each(function(attachment) {\n              console.log(attachment);\n          })"],[0,"\n    },\n    "]],"start1":2741,"start2":2741,"length1":24,"length2":167}]],"length":5547,"saved":false}
{"ts":1361287720420,"patch":[[{"diffs":[[0,"options.\n   "],[1,"/*"],[0," sync: funct"]],"start1":613,"start2":613,"length1":24,"length2":26},{"diffs":[[0,"     }\n    }"],[1,"*/"],[0,"\n})\n\nBackbon"]],"start1":1145,"start2":1145,"length1":24,"length2":26}]],"length":5551,"saved":false}
{"ts":1361288062210,"patch":[[{"diffs":[[0,": []\n    },\n"],[1,"    \n    // We overwrite the parse function as when attachments come down the \n    // wire we need to parse them out into a separate Backbone collection\n    // and make each attachment a Backbone model\n"],[0,"    parse: f"]],"start1":1421,"start2":1421,"length1":24,"length2":226}]],"length":5753,"saved":false}
{"ts":1361288080301,"patch":[[{"diffs":[[0,"esp;\n    },\n"],[1,"    \n    // We call this to save the order of attachments to the server\n"],[0,"    updateAt"]],"start1":2725,"start2":2725,"length1":24,"length2":96}]],"length":5825,"saved":false}
{"ts":1361288127496,"patch":[[{"diffs":[[0,"tachment"],[1,".get(\"binary\")"],[0,")"],[-1,";"],[0,"\n       "]],"start1":3151,"start2":3151,"length1":18,"length2":31}]],"length":5838,"saved":false}
{"ts":1361288184504,"patch":[[{"diffs":[[0,"    "],[-1," console.log(attachment.get(\"binary\"))"],[1,"\n              if (var binary = attachment.get(\"binary\")) {\n                  console.log(binary)\n              }"],[0,"\n   "]],"start1":3132,"start2":3132,"length1":46,"length2":121}]],"length":5913,"saved":false}
{"ts":1361288192619,"patch":[[{"diffs":[[0,", file);\n       "],[1,"//"],[0," model.save();\n "]],"start1":3797,"start2":3797,"length1":32,"length2":34}]],"length":5915,"saved":false}
{"ts":1361288210300,"patch":[[{"diffs":[[0," {\n             "],[1,"var binary;"],[0,"\n              i"]],"start1":3120,"start2":3120,"length1":32,"length2":43},{"diffs":[[0,"    if ("],[-1,"var "],[0,"binary ="]],"start1":3158,"start2":3158,"length1":20,"length2":16}]],"length":5922,"saved":false}
{"ts":1361288271936,"patch":[[{"diffs":[[0,"    "],[-1,"console.log(binary"],[1,"form.append(attachment.id, binary)\n                \n                  console.log(attachment.id"],[0,")\n  "]],"start1":3217,"start2":3217,"length1":26,"length2":103}]],"length":5999,"saved":false}
{"ts":1361288289427,"patch":[[{"diffs":[[0,"ry)\n"],[-1,"                \n                  console.log(attachment.id)\n"],[0,"    "]],"start1":3252,"start2":3252,"length1":70,"length2":8}]],"length":5937,"saved":false}
{"ts":1361290330537,"patch":[[{"diffs":[[0,"         })\n"],[1,"          for(key in this.attributes) {\n              form.append(key, this.attributes[key]);\n          }\n          console.log(form);\n"],[0,"    },\n    i"]],"start1":3273,"start2":3273,"length1":24,"length2":159}]],"length":6072,"saved":false}
{"ts":1361290385642,"patch":[[{"diffs":[[0,"     for"],[1," "],[0,"(key in "]],"start1":3290,"start2":3290,"length1":16,"length2":17}]],"length":6073,"saved":false}
{"ts":1361290432254,"patch":[[{"diffs":[[0,"   for ("],[1,"var "],[0,"key in t"]],"start1":3292,"start2":3292,"length1":16,"length2":20},{"diffs":[[0,"    "],[-1,"console.log"],[1,"var xhr = new XMLHttpRequest();\n   xhr.open(\"POST\", \"/attachment\", true);\n     xhr.send"],[0,"(form);\n"],[1,"\n"],[0,"    "]],"start1":3402,"start2":3402,"length1":27,"length2":104}]],"length":6154,"saved":false}
{"ts":1361291970722,"patch":[[{"diffs":[[0,"    "],[-1," var form = new FormData();\n         "],[1,"\n          var attachments ="],[0," thi"]],"start1":3028,"start2":3028,"length1":45,"length2":36},{"diffs":[[0,"hments\")"],[1,";\n          attachments"],[0,".each(fu"]],"start1":3077,"start2":3077,"length1":16,"length2":39},{"diffs":[[0,"    "],[-1,"form.append(attachment.id, "],[1,"var fileReader = new FileReader();\n                  fileReader.onLoad = function(event) {\n                      console.log(event.target.result);\n                  }\n                  fileReader.readAsDataURL("],[0,"bina"]],"start1":3231,"start2":3231,"length1":35,"length2":218}]],"length":6351,"saved":false}
{"ts":1361291975449,"patch":[[{"diffs":[[0," })\n"],[-1,"          for (var key in this.attributes) {\n              form.append(key, this.attributes[key]);\n          }\n          var xhr = new XMLHttpRequest();\n   xhr.open(\"POST\", \"/attachment\", true);\n     xhr.send(form);\n\n"],[0,"    "]],"start1":3478,"start2":3478,"length1":225,"length2":8}]],"length":6134,"saved":false}
{"ts":1361292004789,"patch":[[{"diffs":[[0,"ons) {\n         "],[1,"console.log(\"Syncing...\")"],[0,"\n          var a"]],"start1":3016,"start2":3016,"length1":32,"length2":57}]],"length":6159,"saved":false}
{"ts":1361292037115,"patch":[[{"diffs":[[0,"tachment) {\n"],[1,"              console.log(attachment)\n"],[0,"            "]],"start1":3150,"start2":3150,"length1":24,"length2":62}]],"length":6197,"saved":false}
{"ts":1361292129338,"patch":[[{"diffs":[[0,"ons.\n   "],[1," "],[0,"/* sync:"]],"start1":617,"start2":617,"length1":16,"length2":17},{"diffs":[[0,"del, options) {\n"],[-1,""],[0,"        options."]],"start1":654,"start2":654,"length1":32,"length2":32},{"diffs":[[0,"der\": []\n    },\n"],[-1,"    "],[0,"\n"],[1,""],[0,"    // We overwr"]],"start1":1418,"start2":1418,"length1":37,"length2":33},{"diffs":[[0,".url() +"],[1," "],[0,"\"/\" + re"]],"start1":2666,"start2":2666,"length1":16,"length2":17},{"diffs":[[0,"\n    },\n"],[-1,"    "],[0,"\n"],[1,""],[0,"    // W"]],"start1":2727,"start2":2727,"length1":21,"length2":17},{"diffs":[[0,"ions) {\n        "],[-1," "],[0,"console.log(\"Syn"]],"start1":3009,"start2":3009,"length1":33,"length2":32},{"diffs":[[0,"ng...\")\n"],[-1,"  "],[0,"        "]],"start1":3043,"start2":3043,"length1":18,"length2":16},{"diffs":[[0,"achments\");\n"],[-1,"  "],[0,"        atta"]],"start1":3091,"start2":3091,"length1":26,"length2":24},{"diffs":[[0,") {\n            "],[-1,"  "],[0,"console.log(atta"]],"start1":3147,"start2":3147,"length1":34,"length2":32},{"diffs":[[0,"            "],[-1," "],[0,"var binary;\n"]],"start1":3187,"start2":3187,"length1":25,"length2":24},{"diffs":[[0,"            "],[-1," "],[-1," "],[0,"if (binary ="]],"start1":3211,"start2":3211,"length1":26,"length2":24},{"diffs":[[0,"        "],[-1,"  "],[0,"var f"],[-1,"ile"],[0,"Reader ="]],"start1":3272,"start2":3272,"length1":26,"length2":21},{"diffs":[[0,"leReader();\n"],[-1,"  "],[0,"            "]],"start1":3300,"start2":3300,"length1":26,"length2":24},{"diffs":[[0,"           f"],[-1,"ile"],[0,"Reader.onLoa"]],"start1":3317,"start2":3317,"length1":27,"length2":24},{"diffs":[[0,"on(event) {\n"],[-1,"  "],[0,"            "]],"start1":3351,"start2":3351,"length1":26,"length2":24},{"diffs":[[0,"                "],[-1,"  }\n "],[1,"}d\n"],[0,"                "]],"start1":3417,"start2":3417,"length1":37,"length2":35},{"diffs":[[0,"        "],[-1," file"],[1,"f"],[0,"Reader.r"]],"start1":3444,"start2":3444,"length1":21,"length2":17},{"diffs":[[0,"            "],[-1,"  }\n  "],[1,"}\n"],[0,"        })\n "]],"start1":3482,"start2":3482,"length1":30,"length2":26},{"diffs":[[0," file);\n"],[1," "],[0,"       /"]],"start1":4042,"start2":4042,"length1":16,"length2":17}]],"length":6160,"saved":false}
{"ts":1361292134678,"patch":[[{"diffs":[[0,"       }"],[-1,"d"],[0,"\n       "]],"start1":3426,"start2":3426,"length1":17,"length2":16}]],"length":6159,"saved":false}
{"ts":1361292139600,"patch":[[{"diffs":[[0,"binary\")) {\n"],[1,"                console.log(binary)\n"],[0,"            "]],"start1":3252,"start2":3252,"length1":24,"length2":60}]],"length":6195,"saved":false}
{"ts":1361292142104,"patch":[[{"diffs":[[0,") {\n"],[-1,"            console.log(attachment)\n"],[0,"    "]],"start1":3147,"start2":3147,"length1":44,"length2":8}]],"length":6159,"saved":false}
{"ts":1361292168025,"patch":[[{"diffs":[[0,"ole.log("],[1,"\"Done\", "],[0,"event.ta"]],"start1":3387,"start2":3387,"length1":16,"length2":24}]],"length":6167,"saved":false}
{"ts":1361292187902,"patch":[[{"diffs":[[0,"eader.on"],[-1,"L"],[1,"l"],[0,"oad = fu"]],"start1":3330,"start2":3330,"length1":17,"length2":17}]],"length":6167,"saved":false}
{"ts":1361294515509,"patch":[[{"diffs":[[0,"achments\");\n"],[1,"        var counter = 0;\n"],[0,"        atta"]],"start1":3091,"start2":3091,"length1":24,"length2":49},{"diffs":[[0,"  co"],[-1,"nsole.log(\"Done\", event.target.result);"],[1,"unter++;\n                    if(counter == attachments.length()) {\n                        console.log(\"All done\")\n                    }"],[0,"\n   "]],"start1":3406,"start2":3406,"length1":47,"length2":144}]],"length":6289,"saved":false}
{"ts":1361294537926,"patch":[[{"diffs":[[0,"ngth"],[-1,"())"],[0," {\n "]],"start1":3467,"start2":3467,"length1":11,"length2":8}]],"length":6286,"saved":false}
{"ts":1361294540147,"patch":[[{"diffs":[[0,"s.length"],[1,")"],[0," {\n     "]],"start1":3463,"start2":3463,"length1":16,"length2":17}]],"length":6287,"saved":false}
{"ts":1361294562307,"patch":[[{"diffs":[[0,"nter++;\n"],[1,"                    console.log(counter)\n"],[0,"        "]],"start1":3411,"start2":3411,"length1":16,"length2":57}]],"length":6328,"saved":false}
{"ts":1361294577174,"patch":[[{"diffs":[[0,"(counter"],[1,", attachments.length"],[0,")\n      "]],"start1":3450,"start2":3450,"length1":16,"length2":36}]],"length":6348,"saved":false}
{"ts":1361295450674,"patch":[[{"diffs":[[0,"ts\")"],[-1,";\n        var counter = 0;\n        attachments.each(function(attachment) {\n            var binary;\n            if (binary ="],[1,".filter(function(attachment) {\n            return"],[0," att"]],"start1":3097,"start2":3097,"length1":131,"length2":57},{"diffs":[[0,"binary\")"],[-1,") {"],[1,";"],[0,"\n       "]],"start1":3167,"start2":3167,"length1":19,"length2":17},{"diffs":[[0,"    "],[1,"});\n"],[0,"        "],[-1,"console.log(binary)\n    "],[1,"var counter = 0;\n        attachments.each(function(attachment) {\n\n"],[0,"    "]],"start1":3181,"start2":3181,"length1":40,"length2":86},{"diffs":[[0,"leReader();\n"],[-1,"    "],[0,"            "]],"start1":3295,"start2":3295,"length1":28,"length2":24},{"diffs":[[0,"        "],[-1,"    "],[0,"counter+"]],"start1":3362,"start2":3362,"length1":20,"length2":16},{"diffs":[[0,"nter++;\n"],[-1,"    "],[0,"        "]],"start1":3373,"start2":3373,"length1":20,"length2":16},{"diffs":[[0,"        "],[-1,"    "],[0,"if"],[1," "],[0,"(counter"]],"start1":3446,"start2":3446,"length1":22,"length2":19},{"diffs":[[0,"                "],[-1," "],[-1,"   "],[0,"console.log(\"All"]],"start1":3495,"start2":3495,"length1":36,"length2":32},{"diffs":[[0,"    "],[-1,"    }\n                "],[0,"}"],[1,"\n"],[0,"\n   "]],"start1":3547,"start2":3547,"length1":31,"length2":10},{"diffs":[[0,"DataURL("],[1,"attachment.get(\""],[0,"binary"],[1,"\")"],[0,")\n      "]],"start1":3584,"start2":3584,"length1":22,"length2":40}]],"length":6296,"saved":false}
{"ts":1361295476462,"patch":[[{"diffs":[[0,"\");\n        });\n"],[1,"        console.log(attachments);\n"],[0,"        var coun"]],"start1":3173,"start2":3173,"length1":32,"length2":66}]],"length":6330,"saved":false}
{"ts":1361295511740,"patch":[[{"diffs":[[0,"        "],[1,"_.each("],[0,"attachme"]],"start1":3248,"start2":3248,"length1":16,"length2":23},{"diffs":[[0,"achments"],[-1,".each("],[1,", "],[0,"function"]],"start1":3266,"start2":3266,"length1":22,"length2":18}]],"length":6333,"saved":false}
{"ts":1361295605303,"patch":[[{"diffs":[[0,"tachment) {\n"],[1,"            console.log(attachment)\n"],[0,"            "]],"start1":3120,"start2":3120,"length1":24,"length2":60}]],"length":6369,"saved":false}
{"contributors":[],"silentsave":false,"ts":1361301589811,"patch":[[{"diffs":[[0,"     });\n       "],[1,"//"],[0," console.log(att"]],"start1":3216,"start2":3216,"length1":32,"length2":34}]],"length":6371,"saved":false}
{"ts":1361301699278,"patch":[[{"diffs":[[0,") {\n            "],[1,"//"],[0,"console.log(atta"]],"start1":3128,"start2":3128,"length1":32,"length2":34},{"diffs":[[0,"\n       "],[-1,"//"],[0," console"]],"start1":3226,"start2":3226,"length1":18,"length2":16}]],"length":6371,"saved":false}
{"ts":1361301777505,"patch":[[{"diffs":[[0,"    "],[-1,"console.log(attachments);"],[0,"\n   "]],"start1":3231,"start2":3231,"length1":33,"length2":8},{"diffs":[[0,"ment) {\n"],[1,"console.log(attachment)"],[0,"\n       "]],"start1":3304,"start2":3304,"length1":16,"length2":39}]],"length":6369,"saved":false}
{"ts":1361302130081,"patch":[[{"diffs":[[0,"      //"],[-1,"console.log(attachment)"],[0,"\n       "]],"start1":3138,"start2":3138,"length1":39,"length2":16}]],"length":6346,"saved":false}
{"ts":1361303848889,"patch":[[{"diffs":[[0,") {\n"],[-1,"console.log(attachment)"],[0,"\n   "]],"start1":3285,"start2":3285,"length1":31,"length2":8},{"diffs":[[0,"      }\n"],[1,"  }"],[0,"\n       "]],"start1":3572,"start2":3572,"length1":16,"length2":19},{"diffs":[[0,"ry\"))\n          "],[-1,"  }"],[0,"\n        })\n    "]],"start1":3642,"start2":3642,"length1":35,"length2":32}]],"length":6323,"saved":false}
{"ts":1361305109782,"patch":[[{"diffs":[[0," },\n    "],[-1,"sync"],[1,"toJSON"],[0,": functi"]],"start1":2968,"start2":2968,"length1":20,"length2":22},{"diffs":[[0,"N: function("],[-1,"method, model, "],[0,"options) {\n "]],"start1":2981,"start2":2981,"length1":39,"length2":24},{"diffs":[[0,"    "],[-1,"console.log(\"Syncing...\")"],[1,"var json = _.clone(this.attributes);\n        json.attachments = {};"],[0,"\n   "]],"start1":3008,"start2":3008,"length1":33,"length2":75},{"diffs":[[0,"    "],[-1,"console.log(counter, attachments.length)"],[1,"json.attachments[attachment.id] = event.target.result;"],[0,"\n   "]],"start1":3449,"start2":3449,"length1":48,"length2":62},{"diffs":[[0,"    "],[-1,"console.log(\"All done\")"],[1,"return json;"],[0,"\n   "]],"start1":3577,"start2":3577,"length1":31,"length2":20}]],"length":6355,"saved":false}
{"ts":1361305114665,"patch":[[{"diffs":[[0,"s.length) {\n"],[1,"                    console.log(json)\n"],[0,"            "]],"start1":3549,"start2":3549,"length1":24,"length2":62}]],"length":6393,"saved":false}
{"ts":1361305157460,"patch":[[{"diffs":[[0,");\n        json."],[1,"_"],[0,"attachments = {}"]],"start1":3046,"start2":3046,"length1":32,"length2":33}]],"length":6394,"saved":false}
{"ts":1361305161648,"patch":[[{"diffs":[[0,"++;\n"],[-1,"                json.attachments[attachment.id] = event.target.result;\n"],[0,"    "]],"start1":3434,"start2":3434,"length1":79,"length2":8}]],"length":6323,"saved":false}
{"ts":1361305164951,"patch":[[{"diffs":[[0,"nter++;\n"],[1,"                json._attachments[attachment.id] = event.target.result;\n"],[0,"        "]],"start1":3430,"start2":3430,"length1":16,"length2":88}]],"length":6395,"saved":false}
{"contributors":[],"silentsave":false,"ts":1361306437165,"patch":[[{"diffs":[[0,"  });\n    },"],[1,"\n\n    // We override the toJSON function as this is what Backbone.sync uses to \n    // save our model to the server."],[0,"\n    toJSON:"]],"start1":2959,"start2":2959,"length1":24,"length2":140},{"diffs":[[0,") {\n"],[-1,"            //\n"],[0,"    "]],"start1":3274,"start2":3274,"length1":23,"length2":8},{"diffs":[[0,"    });\n"],[1,"\n"],[0,"        "],[1,"// We need to use a counter as loading of the files is asynchronous\n        // and we do not want to return until they are all loaded"],[0,"\n       "]],"start1":3327,"start2":3327,"length1":24,"length2":158},{"diffs":[[0,"ment) {\n"],[1,"            console"],[0,"\n"],[-1,""],[0,"        "]],"start1":3546,"start2":3546,"length1":17,"length2":36},{"diffs":[[0,"nt.id] ="],[1," {\n                    content_type: attachment.get(\"content_type\"),\n                    data:"],[0," event.t"]],"start1":3734,"start2":3734,"length1":16,"length2":110},{"diffs":[[0,"t.result"],[-1,";"],[1,"\n                }"],[0,"\n       "]],"start1":3848,"start2":3848,"length1":17,"length2":34},{"diffs":[[0,"    }\n  "],[-1,"}\n"],[1,"   "],[0,"    "],[1,"   }\n"],[0,"        "]],"start1":4011,"start2":4011,"length1":22,"length2":28},{"diffs":[[0,"\"))\n"],[-1,"          \n"],[0,"    "]],"start1":4087,"start2":4087,"length1":19,"length2":8}]],"length":6755,"saved":false}
{"ts":1361307193654,"patch":[[{"diffs":[[0,"ver.\n   "],[1,"/*"],[0," toJSON:"]],"start1":3083,"start2":3083,"length1":16,"length2":18},{"diffs":[[0,"   })\n    },"],[1,"*/"],[0,"\n    idAttri"]],"start1":4098,"start2":4098,"length1":24,"length2":26}]],"length":6759,"saved":false}
{"ts":1361307348091,"patch":[[{"diffs":[[0,"ver.\n   "],[-1,"/*"],[0," toJSON:"]],"start1":3083,"start2":3083,"length1":18,"length2":16},{"diffs":[[0,"tion(options) {\n"],[1,""],[0,"        var json"]],"start1":3104,"start2":3104,"length1":32,"length2":32},{"diffs":[[0,"        });\n"],[1,"   console.log(json)\n                    return json;"],[0,"\n"],[-1,""],[0,"        // W"]],"start1":3323,"start2":3323,"length1":25,"length2":78},{"diffs":[[0,"ded\n        "],[1,"/*"],[0,"var counter "]],"start1":3527,"start2":3527,"length1":24,"length2":26},{"diffs":[[0,"    "],[-1,"   console.log(json)\n                    return json;"],[0,"\n   "]],"start1":3996,"start2":3996,"length1":61,"length2":8},{"diffs":[[0,"  })"],[1,",*/"],[0,"\n    },"],[-1,"*/"],[0,"\n   "]],"start1":4099,"start2":4099,"length1":17,"length2":18}]],"length":6760,"saved":false}
{"ts":1361307407952,"patch":[[{"diffs":[[0,");\n "],[-1,"  console.log(json)\n                    return json;"],[0,"\n   "]],"start1":3332,"start2":3332,"length1":60,"length2":8},{"diffs":[[0,"        "],[-1,"/*"],[0,"var coun"]],"start1":3479,"start2":3479,"length1":18,"length2":16},{"diffs":[[0,"                "],[1,"  console.log(json)\n                    return json;"],[0,"\n               "]],"start1":3930,"start2":3930,"length1":32,"length2":84},{"diffs":[[0,"  })"],[-1,",*/"],[0,"\n   "]],"start1":4097,"start2":4097,"length1":11,"length2":8}]],"length":6755,"saved":false}
{"ts":1361307504580,"patch":[[{"diffs":[[0,"ta: "],[-1,"event.target.result"],[1,"\"\""],[0,"\n   "]],"start1":3834,"start2":3834,"length1":27,"length2":10}]],"length":6738,"saved":false}
{"ts":1361307555280,"patch":[[{"diffs":[[0,"ment) {\n"],[-1,"            console"],[0,"\n       "]],"start1":3547,"start2":3547,"length1":35,"length2":16}]],"length":6719,"saved":false}
{"ts":1361308994792,"patch":[[{"diffs":[[0,"     });\n    },\n"],[1,"    sync: function() {\n       console.log(arguments);\n      return Backbone.sync.apply(this, arguments);\n\n    },"],[0,"\n    // We overr"]],"start1":2956,"start2":2956,"length1":32,"length2":144}]],"length":6831,"saved":false}
{"ts":1361313638331,"patch":[[{"diffs":[[0,"    "],[-1,"console.log(arguments);\n      return Backbone.sync.apply(this, arguments)"],[1,"var args = arguments;\n       var xhr;\n       this.toJSON(function(attrs) {\n           args[2].attrs = attrs;\n           xhr = Backbone.sync.apply(this, arguments);\n       })\n      return xhr"],[0,";\n\n "]],"start1":2998,"start2":2998,"length1":81,"length2":198},{"diffs":[[0,"unction("],[-1,"options"],[1,"callback"],[0,") {\n    "]],"start1":3330,"start2":3330,"length1":23,"length2":24},{"diffs":[[0,"    "],[-1,"return json"],[1,"callback(json)"],[0,";\n  "]],"start1":4176,"start2":4176,"length1":19,"length2":22}]],"length":6952,"saved":false}
{"ts":1361313837084,"patch":[[{"diffs":[[0,"his, arg"],[-1,"ument"],[0,"s);\n    "]],"start1":3149,"start2":3149,"length1":21,"length2":16}]],"length":6947,"saved":false}
{"ts":1361313961400,"patch":[[{"diffs":[[0,"ar xhr;\n"],[1,"       \n       // Because the FileReader API is asynchronous we have to use a callback\n       // style to call Backbone.sync when the files have been read\n"],[0,"       t"]],"start1":3032,"start2":3032,"length1":16,"length2":171},{"diffs":[[0,"= attrs;"],[1," // args[2] is the options object from arguments"],[0,"\n       "]],"start1":3257,"start2":3257,"length1":16,"length2":64},{"diffs":[[0,";\n       })\n"],[1,""],[0,"      return"]],"start1":3362,"start2":3362,"length1":24,"length2":24},{"diffs":[[0,"rn xhr;\n"],[-1,"\n"],[0,"    },\n "]],"start1":3384,"start2":3384,"length1":17,"length2":16},{"diffs":[[0,"nter++;\n"],[1,"                var data = event.target.result.split(\",\")[1];\n"],[0,"        "]],"start1":4093,"start2":4093,"length1":16,"length2":78},{"diffs":[[0,"ta: "],[-1,"\"\""],[1,"data"],[0,"\n   "]],"start1":4304,"start2":4304,"length1":10,"length2":12}]],"length":7213,"saved":false}
